import{_ as E,h as T,m as I,s as F}from"./index.1653003640069.js";import{a as R,j as f,k as j,a3 as M,m as P,a2 as l,o as S,R as U,S as o,e as s,Z as n,u as _,X as r}from"./vue.1653003640069.js";const X={class:"card-header"},Z={class:"tree-h-flex"},q={class:"tree-h-left"},z={class:"tree-h-right"},G=r("\u5168\u90E8\u5C55\u5F00"),H=r("\u5168\u90E8\u6298\u53E0"),J=r("\u6839\u8282\u70B9"),K=r("\u5237\u65B0"),L={style:{"margin-bottom":"45px"}},O=R({props:{maInit:Boolean},emits:["node-click"],setup(m,{expose:h,emit:u}){const v=m,c=f(""),a=f(),x={children:"children",label:"name"};j(c,e=>{a.value.filter(e)});const g=(e,t)=>e?t.name.includes(e):!0,p=M({data:[],willInit:!0}),w=async e=>{if(e=="expandAll")for(let t=0;t<a.value.store._getAllNodes().length;t++)a.value.store._getAllNodes()[t].expanded=!0;else if(e=="collapseAll")for(let t=0;t<a.value.store._getAllNodes().length;t++)a.value.store._getAllNodes()[t].expanded=!1;else e=="refresh"?await i():e=="rootNode"&&u("node-click",{id:"",name:""})},i=async()=>{p.data=await F({url:"/gen/org/dept/tree",method:"get"})};P(()=>{v.maInit==!1&&i()});const y=e=>{u("node-click",{id:e.id,name:e.name})};return h({init:async()=>{await i()}}),(e,t)=>{const N=l("el-input"),k=l("el-icon"),A=l("el-button"),d=l("el-dropdown-item"),C=l("el-dropdown-menu"),b=l("el-dropdown"),B=l("el-tree"),V=l("el-card");return S(),U(V,{class:"box-card",style:{height:"100%"},"body-style":"height: 100%;overflow: auto"},{header:o(()=>[s("div",X,[s("div",Z,[s("div",q,[n(N,{"prefix-icon":_(T),modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=D=>c.value=D),placeholder:"\u90E8\u95E8\u540D\u79F0"},null,8,["prefix-icon","modelValue"])]),s("div",z,[n(b,{onCommand:w},{dropdown:o(()=>[n(C,null,{default:o(()=>[n(d,{command:"expandAll"},{default:o(()=>[G]),_:1}),n(d,{command:"collapseAll"},{default:o(()=>[H]),_:1}),n(d,{command:"rootNode"},{default:o(()=>[J]),_:1}),n(d,{command:"refresh"},{default:o(()=>[K]),_:1})]),_:1})]),default:o(()=>[n(A,{style:{"margin-left":"8px",width:"30px"}},{default:o(()=>[n(k,{class:"el-icon--right"},{default:o(()=>[n(_(I))]),_:1})]),_:1})]),_:1})])])])]),default:o(()=>[s("div",L,[n(B,{ref_key:"treeRef",ref:a,class:"filter-tree",data:_(p).data,props:x,"filter-node-method":g,onNodeClick:y},null,8,["data"])])]),_:1})}}});var $=E(O,[["__scopeId","data-v-5a7a6c7c"]]);export{$ as D};
