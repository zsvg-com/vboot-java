import{p as J,c as M}from"./edit.16530036400692.js";import{a as $,aB as q,a3 as E,ag as L,m as U,a2 as a,o as N,R,S as o,Z as e,e as s,u,X as w,ap as X,j as B,W as T}from"./vue.1653003640069.js";import{s as z,N as W}from"./index.1653003640069.js";import{B as k}from"./store.1653003640069.js";const Z=s("div",{class:"zinput"}," \u8FD9\u662F\u4E00\u4E2A\u6D4B\u8BD5\u7684\u6D41\u7A0B\uFF0C\u76EE\u524D\u529F\u80FD\u8FD8\u4E0D\u5B8C\u5584 ",-1),G={class:"zinput"},H=s("span",{style:{color:"red"}},"\u7D27\u6025",-1),K=s("span",{style:{color:"blue"}},"\u6025",-1),P=s("span",null,"\u4E00\u822C",-1),Q=s("div",{class:"zinput"}," N5.\u90E8\u95E8\u8D1F\u8D23\u4EBA(\u5F20\u4E09) ",-1),Y={class:"zinput",style:{height:"auto"}},ee={class:"zinput",style:{height:"auto"}},oe=w("\u4E0A \u4F20"),te={style:{"padding-left":"105px","border-right":"1px solid #ccc"}},le=w("\u6D41\u7A0B\u56FE"),ae=$({props:{temid:String},setup(S,{expose:A}){const y=S,x=q(),i=E({form:{},params:{path:"",query:""},xml:null}),{form:r,params:p}=L(i);U(async()=>{var n;i.params=x,(n=p.value.query)!=null&&n.id,await C()}),A({getOperateInfo:()=>X(r.value)});const C=async()=>{if(!i.xml){i.xml=await z({url:"/bpm/proc/main/texml/"+y.temid,method:"get"}),console.log(i.xml),await k.importXML(i.xml);const n=k.getModeler().get("elementRegistry");console.log(n);const m=[];n.forEach(t=>{(t.id=="L7"||t.id=="N1"||t.id=="N2")&&m.push(t)});const _=[];n.forEach(t=>{t.id=="N4"&&_.push(t)});const d=[];n.forEach(t=>{(t.id=="L1"||t.id=="L3")&&d.push(t)});let l=k.modeler.get("modeling");l.setColor(m,{fill:"#e4feef"}),l.setColor(_,{fill:"#fed6d6"}),l.setColor(d,{stroke:"#009900"})}};return(n,m)=>{const _=a("el-form-item"),d=a("el-col"),l=a("el-row"),t=a("el-radio"),c=a("el-radio-group"),f=a("el-input"),h=a("el-button"),g=a("el-upload"),F=a("el-checkbox"),v=a("el-form");return N(),R(v,{class:"zform",model:u(r),"label-width":"180px"},{default:o(()=>[e(l,{style:{"border-top":"1px solid #d2d2d2"}},{default:o(()=>[e(d,{span:24},{default:o(()=>[e(_,{label:"\u6D41\u7A0B\u8BF4\u660E\uFF1A"},{default:o(()=>[Z]),_:1})]),_:1})]),_:1}),e(l,null,{default:o(()=>[e(d,{span:24},{default:o(()=>[e(_,{label:"\u7D27\u6025\u7A0B\u5EA6\uFF1A"},{default:o(()=>[s("div",G,[e(c,{modelValue:u(r).opurg,"onUpdate:modelValue":m[0]||(m[0]=b=>u(r).opurg=b)},{default:o(()=>[e(t,{label:1},{default:o(()=>[H]),_:1}),e(t,{label:2},{default:o(()=>[K]),_:1}),e(t,{label:3},{default:o(()=>[P]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1}),e(l,null,{default:o(()=>[e(d,{span:24},{default:o(()=>[e(_,{label:"\u5373\u5C06\u6D41\u5411\uFF1A"},{default:o(()=>[Q]),_:1})]),_:1})]),_:1}),e(l,null,{default:o(()=>[e(d,{span:24},{default:o(()=>[e(_,{label:"\u5904\u7406\u610F\u89C1\uFF1A"},{default:o(()=>[s("div",Y,[e(f,{modelValue:u(r).opnot,"onUpdate:modelValue":m[1]||(m[1]=b=>u(r).opnot=b),type:"textarea",rows:5,placeholder:" "},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),e(l,null,{default:o(()=>[e(d,{span:24},{default:o(()=>[e(_,{label:"\u9644\u4EF6\uFF1A"},{default:o(()=>[s("div",ee,[e(g,{class:"upload-demo",action:"https://jsonplaceholder.typicode.com/posts/","file-list":n.fileList},{default:o(()=>[e(h,{type:"primary"},{default:o(()=>[oe]),_:1})]),_:1},8,["file-list"])])]),_:1})]),_:1})]),_:1}),e(l,null,{default:o(()=>[e(d,{span:24},{default:o(()=>[s("div",te,[e(F,{modelValue:n.checked2,"onUpdate:modelValue":m[2]||(m[2]=b=>n.checked2=b)},{default:o(()=>[le]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(l,null,{default:o(()=>[e(d,{span:24})]),_:1})]),_:1},8,["model"])}}}),ue=s("div",{style:{"line-height":"32px"}},"\u6D41\u7A0B\u5B9E\u4F8B",-1),ne=w("\u4FDD \u5B58"),se=w("\u5173 \u95ED"),de={style:{"margin-top":"8px","margin-bottom":"8px"}},re={class:"zinput"},me=["src"],fe=$({setup(S){const A=q(),y=B(),x=B("tab1"),i=B(),r=E({url:"/oa/flow/main",params:{path:"",query:""},form:{avtag:!0},formJson:{},vformShow:!1}),{form:p,formJson:V}=L(r);U(()=>{W.done(),C(r,A)});const C=async(l,t)=>{var f,h;l.params=t;let c=(f=l.params.query)==null?void 0:f.id;if(c)l.form=await z({url:l.url+"/one/"+c,method:"get"});else{let g=(h=l.params.query)==null?void 0:h.temid;const F=await z({url:"/oa/flow/temp/one/"+g,method:"get"});p.value.protd=F.protd,p.value.temid=g,p.value.avtag=!0,V.value=JSON.parse(F.vform),l.vformShow=!0}},n=async()=>{p.value.zbpm=i.value.getOperateInfo(),await M(y.value,r)},m=E({}),_=E({}),d=B(null);return(l,t)=>{const c=a("el-col"),f=a("el-button"),h=a("el-row"),g=a("el-input"),F=a("el-form-item"),v=a("el-tab-pane"),b=a("v-form-render"),j=a("el-tabs"),I=a("el-form"),O=a("el-card");return N(),R(O,{class:"box-card","body-style":{padding:"2px 8px"},shadow:"never"},{header:o(()=>[e(h,null,{default:o(()=>[e(c,{span:10},{default:o(()=>[ue]),_:1}),e(c,{span:14,style:{"text-align":"right"}},{default:o(()=>[e(f,{type:"success",onClick:n,plain:""},{default:o(()=>[ne]),_:1}),e(f,{type:"info",onClick:t[0]||(t[0]=D=>u(J)()),plain:""},{default:o(()=>[se]),_:1})]),_:1})]),_:1})]),default:o(()=>[s("div",de,[e(I,{ref_key:"formRef",ref:y,model:u(p),"label-width":"140px"},{default:o(()=>[e(j,{type:"card",modelValue:x.value,"onUpdate:modelValue":t[2]||(t[2]=D=>x.value=D)},{default:o(()=>[e(v,{label:"\u57FA\u672C\u4FE1\u606F",name:"tab1"},{default:o(()=>[e(h,null,{default:o(()=>[e(c,{span:24},{default:o(()=>[e(F,{label:"\u7533\u8BF7\u6807\u9898\uFF1A",prop:"name",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:o(()=>[s("div",re,[e(g,{modelValue:u(p).name,"onUpdate:modelValue":t[1]||(t[1]=D=>u(p).name=D)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{label:"\u5BA1\u6279\u5185\u5BB9",name:"tab2"},{default:o(()=>[u(r).vformShow?(N(),R(b,{key:0,"form-json":u(V),"form-data":u(m),"option-data":u(_),ref_key:"vFormRef",ref:d},null,8,["form-json","form-data","option-data"])):T("",!0)]),_:1}),e(v,{label:"\u6D41\u7A0B\u5904\u7406",name:"tab3",class:"zform"},{default:o(()=>[e(ae,{temid:u(p).protd,ref_key:"bpmRef",ref:i},null,8,["temid"])]),_:1}),e(v,{label:"\u6743\u9650\u4FE1\u606F",name:"tab4",class:"zform"},{default:o(()=>[s("img",{src:l.qx,style:{width:"100%"}},null,8,me)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])])]),_:1})}}});export{fe as default};
