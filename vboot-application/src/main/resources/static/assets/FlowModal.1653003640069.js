import{a as W,j as D,a3 as L,ag as X,R as Z,S as u,u as d,a2 as n,o as p,e as o,Z as a,a9 as q,b as k,a7 as I,Y as v,F as M,X as f,az as J,aA as O,ap as P}from"./vue.1653003640069.js";import{_ as ee,s as w,E as le}from"./index.1653003640069.js";import{C as te}from"./GenTree.1653003640069.js";const F=h=>(J("data-v-4c979fca"),h=h(),O(),h),ae={style:{height:"440px"}},oe=f("\u67E5\u8BE2"),ue=F(()=>o("span",{style:{color:"green","margin-left":"10px"}},"\u5FEB\u6377\u9009\u62E9\u8FD9\u91CC\u9ED8\u8BA4\u4F1A\u5C55\u793A\u6700\u8FD1\u4F7F\u7528\u8FC7\u7684\u6D41\u7A0B\u6A21\u677F\uFF0C\u4E5F\u53EF\u6A21\u7CCA\u641C\u7D22\u6240\u6709\u7684\u6A21\u677F",-1)),se={style:{"margin-top":"5px",overflow:"auto",height:"353px",border:"1px solid #ccc"}},ne={class:"z-flow-search",style:{padding:"2px"}},ce=["onClick"],de=F(()=>o("img",{src:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1813762643,1914315241&fm=26&gp=0.jpg"},null,-1)),ie={class:"layui-elip f-flow-name"},re={class:"layui-elip f-flow-cate"},_e={style:{height:"390px"}},pe={style:{border:"1px solid #ccc",height:"390px","margin-left":"5px",overflow:"auto"}},fe={class:"z-cate-tree"},he=["onClick"],me=F(()=>o("img",{src:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1813762643,1914315241&fm=26&gp=0.jpg"},null,-1)),ke={class:"layui-elip f-flow-name"},ve={class:"layui-elip f-flow-cate"},we=f("\u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1"),ye={class:"dialog-footer"},ge=f("\u786E\u8BA4"),Fe=f("\u53D6\u6D88"),Ce=f("\u6E05\u7A7A\u9009\u62E9"),xe=W({emits:["close"],setup(h,{expose:U,emit:C}){let y=-1,x="k1",E=!1;const b=D(),s=L({isShow:!1,receSearch:"",receItems:[],tierItems:[],seldItem:null}),{receItems:c,tierItems:r,seldItem:i}=X(s),S=D("k1");async function N(e){x=e.paneName,x==="k2"&&(E||(await b.value.init(),E=!0))}async function V(){c.value=await w({url:"/oa/flow/temp/list?type="+y,method:"get",params:{name:s.receSearch}});for(const e of c.value)e.checked=!1}const K=async()=>{c.value=await w({url:"/oa/flow/rece/list?type="+y,method:"get"})};function R(e){if(e.checked=!e.checked,e.checked==!0){for(let t=0;t<c.value.length;t++)c.value[t].id!==e.id&&(c.value[t].checked=!1);i.value=e}else i.value=null}async function T(e){e&&e.id&&(r.value=await w({url:"/oa/flow/temp/list?type="+y,method:"get",params:{catid:e.id}}))}function H(e){if(e.checked=!e.checked,e.checked==!0){for(let t=0;t<r.value.length;t++)r.value[t].id!==e.id&&(r.value[t].checked=!1);i.value=e}else i.value=null}U({openModal:async()=>{await K(),s.isShow=!0}});const j=()=>{if(i.value==null)return le.warning("\u8BF7\u9009\u62E9\u4E00\u4E2A\u6D41\u7A0B\u6A21\u677F\u518D\u53D1\u8D77\u6D41\u7A0B"),!1;const e=P(i.value);e&&e.id&&w({url:"/oa/flow/rece",method:"post",data:[e]}),s.isShow=!1,C("close",e)},z=()=>{s.isShow=!1,C("close",null)};return(e,t)=>{const Y=n("el-input"),m=n("el-button"),A=n("el-checkbox"),g=n("el-tab-pane"),B=n("el-col"),$=n("el-row"),G=n("el-tabs"),Q=n("el-dialog");return p(),Z(Q,{modelValue:d(s).isShow,"onUpdate:modelValue":t[3]||(t[3]=l=>d(s).isShow=l),title:"\u6D41\u7A0B\u6A21\u677F\u9009\u62E9",width:"800px",draggable:""},{footer:u(()=>[o("span",ye,[a(m,{type:"primary",onClick:j},{default:u(()=>[ge]),_:1}),a(m,{onClick:t[2]||(t[2]=l=>d(s).isShow=!1)},{default:u(()=>[Fe]),_:1}),a(m,{onClick:z,style:{"margin-left":"20px"}},{default:u(()=>[Ce]),_:1})])]),default:u(()=>[o("div",ae,[a(G,{modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=l=>S.value=l),type:"card",onTabClick:N},{default:u(()=>[a(g,{label:"\u5FEB\u6377\u9009\u62E9",name:"k1"},{default:u(()=>[o("div",null,[a(Y,{modelValue:d(s).receSearch,"onUpdate:modelValue":t[0]||(t[0]=l=>d(s).receSearch=l),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u67E5\u8BE2",style:{width:"200px"},onKeyup:q(V,["enter"])},null,8,["modelValue","onKeyup"]),a(m,{type:"primary",style:{"margin-left":"10px"},onClick:V},{default:u(()=>[oe]),_:1}),ue]),o("div",se,[o("ul",ne,[(p(!0),k(M,null,I(d(c),l=>(p(),k("li",{key:l.id,class:"f-flow",onClick:_=>R(l)},[a(A,{modelValue:l.checked,"onUpdate:modelValue":_=>l.checked=_},null,8,["modelValue","onUpdate:modelValue"]),de,o("span",ie,v(l.name),1),o("span",re,v(l.catna),1)],8,ce))),128))])])]),_:1}),a(g,{label:"\u6309\u5206\u7C7B\u9009\u62E9",name:"k2"},{default:u(()=>[a($,null,{default:u(()=>[a(B,{span:12},{default:u(()=>[o("div",_e,[a(te,{maInit:!0,onNodeClick:T,url:"/oa/flow/cate/tree",ref_key:"cateTreeRef",ref:b},null,512)])]),_:1}),a(B,{span:12},{default:u(()=>[o("div",pe,[o("ul",fe,[(p(!0),k(M,null,I(d(r),l=>(p(),k("li",{key:l.id,class:"f-flow",title:"444444444",onClick:_=>H(l)},[a(A,{modelValue:l.checked,"onUpdate:modelValue":_=>l.checked=_},null,8,["modelValue","onUpdate:modelValue"]),me,o("span",ke,v(l.name),1),o("span",ve,v(l.catna),1)],8,he))),128))])])]),_:1})]),_:1})]),_:1}),a(g,{label:"\u6211\u7684\u6536\u85CF",name:"k3"},{default:u(()=>[we]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])}}});var Ae=ee(xe,[["__scopeId","data-v-4c979fca"]]);export{Ae as default};
