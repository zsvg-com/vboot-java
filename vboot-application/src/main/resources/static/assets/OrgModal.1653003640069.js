import{a as q,j as K,a3 as J,ag as P,a2 as f,o as h,R as ee,S as c,e as a,Z as s,u as p,a9 as le,b as k,a7 as E,Y as y,F as V,X as g,az as te,aA as oe,ap as N}from"./vue.1653003640069.js";import{D as se}from"./DeptTree.1653003640069.js";import{_ as ae,i as ue,s as C}from"./index.1653003640069.js";const F=b=>(te("data-v-6fd9718f"),b=b(),oe(),b),ce={style:{height:"440px"}},ne=g("\u67E5\u8BE2"),ie={style:{"margin-top":"5px",overflow:"auto",height:"353px",border:"1px solid #ccc"}},de={class:"z-org-search",id:"zOrgSearch",style:{padding:"2px"}},re=["onClick"],fe=F(()=>a("img",{src:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1813762643,1914315241&fm=26&gp=0.jpg"},null,-1)),pe={class:"layui-elip f-user-name"},_e={class:"layui-elip f-user-dept"},he={style:{height:"390px"}},ve={style:{border:"1px solid #ccc",height:"390px","margin-left":"5px",overflow:"auto"}},ke={class:"z-org-tree"},ge=["onClick"],me=F(()=>a("img",{src:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1813762643,1914315241&fm=26&gp=0.jpg"},null,-1)),ye={class:"layui-elip f-user-name"},be={class:"layui-elip f-user-dept"},Ie=g("\u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1"),xe=g("\u8FD9\u4E2A\u4E5F\u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1"),Ce={style:{"margin-left":"5px"}},Fe=F(()=>a("div",{style:{height:"36px"}},[a("div",{style:{"margin-top":"20px"}},"\u5DF2 \u9009")],-1)),we={style:{border:"1px solid #ccc",height:"390px",overflow:"auto"}},Se={class:"z-org-selected",style:{position:"relative"}},Ee=F(()=>a("img",{src:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1813762643,1914315241&fm=26&gp=0.jpg"},null,-1)),Ve={class:"layui-elip f-user-name2"},Be={class:"dialog-footer"},De=g("\u786E\u8BA4"),Me=g("\u53D6\u6D88"),Te=g("\u6E05\u7A7A\u9009\u62E9"),Ae=q({emits:["close"],setup(b,{expose:j,emit:B}){let m=-1,_="k1",w=1,S=null,D=!1;const M=K(),r=J({isShow:!1,receSearch:"",receItems:[],tierItems:[],seldItems:[]}),{receItems:d,tierItems:i,seldItems:t}=P(r),T=K("k1");async function z(l){if(_=l.paneName,_==="k1")for(const e of d.value){let u=!1;for(const n of t.value)if(n.id==e.id){e.checked=!0,u=!0;break}u||(e.checked=!1)}else if(_==="k2"){D||(await M.value.init(),D=!0);for(const e of i.value){let u=!1;for(const n of t.value)if(n.id==e.id){e.checked=!0,u=!0;break}u||(e.checked=!1)}}}async function A(){d.value=await C({url:"/gen/org/main?type="+m,method:"get",params:{name:r.receSearch}});for(const l of d.value){let e=!1;for(const u of t.value)if(u.id==l.id){l.checked=!0,e=!0;break}e||(l.checked=!1)}}const R=async()=>{d.value=await C({url:"/gen/org/rece?type="+m,method:"get"})};function O(l){if(l.checked=!l.checked,w==1){t.value.length>0&&t.value.splice(0,1),t.value.push(l);for(let e=0;e<d.value.length;e++)d.value[e].id!==l.id&&(d.value[e].checked=!1)}else if(l.checked){let e=!1;for(const u of t.value)if(u.id===l.id){e=!0;break}e||t.value.push(l)}else for(let e=0;e<t.value.length;e++)if(t.value[e].id===l.id){t.value.splice(e,1);break}}async function Y(l){if(l&&l.id){i.value=await C({url:"/gen/org/main?type="+m,method:"get",params:{deptid:l.id}});for(const e of i.value)for(const u of t.value)if(u.id===e.id){e.checked=!0;break}}}function $(l){if(l.checked=!l.checked,w==1){t.value.length>0&&t.value.splice(0,1),t.value.push(l);for(let e=0;e<i.value.length;e++)i.value[e].id!==l.id&&(i.value[e].checked=!1)}else if(l.checked){let e=!1;for(const u of t.value)if(u.id===l.id){e=!0;break}e||t.value.push(l)}else for(let e=0;e<t.value.length;e++)if(t.value[e].id===l.id){t.value.splice(e,1);break}}function G(l){if(_==="k1"){for(let e=0;e<d.value.length;e++)if(d.value[e].id===l.id){d.value[e].checked=!1;break}}else if(_==="k2"){for(let e=0;e<i.value.length;e++)if(i.value[e].id===l.id){i.value[e].checked=!1;break}}for(let e=0;e<t.value.length;e++)if(t.value[e].id===l.id){t.value.splice(e,1);break}}j({openModal:async l=>{if(l.orgType||(l.orgType=8),l.selectMode||(l.selectMode=1),m!=l.orgType&&(m=l.orgType,await R(),i.value.splice(0,i.value.length)),w=l.selectMode,S=l.opener,t.value=l.orgs?l.orgs:[],_==="k1")for(const e of d.value)for(const u of t.value){let n=!1;if(u.id==e.id){e.checked=!0,n=!0;break}n||(e.checked=!1)}else if(_==="k2")for(const e of i.value)for(const u of t.value){let n=!1;if(u.id==e.id){e.checked=!0,n=!0;break}n||(e.checked=!1)}r.isShow=!0}});const Q=()=>{const l=N(t.value);l&&l.length>0&&C({url:"/gen/org/rece",method:"post",data:l}),B("close",{opener:S,orgs:N(l)}),r.isShow=!1},W=()=>{B("close",{opener:S,orgs:null}),r.isShow=!1};return(l,e)=>{const u=f("el-input"),n=f("el-button"),U=f("el-checkbox"),I=f("el-tab-pane"),x=f("el-col"),H=f("el-row"),L=f("el-tabs"),X=f("el-icon"),Z=f("el-dialog");return h(),ee(Z,{modelValue:p(r).isShow,"onUpdate:modelValue":e[3]||(e[3]=o=>p(r).isShow=o),title:"\u7EC4\u7EC7\u67B6\u6784\u9009\u62E9",width:"1000px",draggable:""},{footer:c(()=>[a("span",Be,[s(n,{type:"primary",onClick:Q},{default:c(()=>[De]),_:1}),s(n,{onClick:e[2]||(e[2]=o=>p(r).isShow=!1)},{default:c(()=>[Me]),_:1}),s(n,{onClick:W,style:{"margin-left":"20px"}},{default:c(()=>[Te]),_:1})])]),default:c(()=>[a("div",ce,[s(H,null,{default:c(()=>[s(x,{span:16},{default:c(()=>[s(L,{modelValue:T.value,"onUpdate:modelValue":e[1]||(e[1]=o=>T.value=o),type:"card",onTabClick:z},{default:c(()=>[s(I,{label:"\u5FEB\u6377\u9009\u62E9",name:"k1"},{default:c(()=>[a("div",null,[s(u,{modelValue:p(r).receSearch,"onUpdate:modelValue":e[0]||(e[0]=o=>p(r).receSearch=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u67E5\u8BE2",style:{width:"200px"},onKeyup:le(A,["enter"])},null,8,["modelValue","onKeyup"]),s(n,{type:"primary",style:{"margin-left":"10px"},onClick:A},{default:c(()=>[ne]),_:1})]),a("div",ie,[a("ul",de,[(h(!0),k(V,null,E(p(d),o=>(h(),k("li",{key:o.id,class:"f-user",onClick:v=>O(o)},[s(U,{modelValue:o.checked,"onUpdate:modelValue":v=>o.checked=v},null,8,["modelValue","onUpdate:modelValue"]),fe,a("span",pe,y(o.name),1),a("span",_e,y(o.dept),1)],8,re))),128))])])]),_:1}),s(I,{label:"\u5C42\u7EA7\u67B6\u6784",name:"k2"},{default:c(()=>[s(H,null,{default:c(()=>[s(x,{span:12},{default:c(()=>[a("div",he,[s(se,{onNodeClick:Y,maInit:!0,ref_key:"deptTreeRef",ref:M},null,512)])]),_:1}),s(x,{span:12},{default:c(()=>[a("div",ve,[a("ul",ke,[(h(!0),k(V,null,E(p(i),o=>(h(),k("li",{key:o.id,class:"f-user",title:"444444444",onClick:v=>$(o)},[s(U,{modelValue:o.checked,"onUpdate:modelValue":v=>o.checked=v},null,8,["modelValue","onUpdate:modelValue"]),me,a("span",ye,y(o.name),1),a("span",be,y(o.dept),1)],8,ge))),128))])])]),_:1})]),_:1})]),_:1}),s(I,{label:"\u5E38\u7528\u7FA4\u7EC4",name:"k3"},{default:c(()=>[Ie]),_:1}),s(I,{label:"\u6211\u7684\u6536\u85CF",name:"k4"},{default:c(()=>[xe]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(x,{span:8},{default:c(()=>[a("div",Ce,[Fe,a("div",we,[a("ul",Se,[(h(!0),k(V,null,E(p(t),o=>(h(),k("li",{key:o.id,class:"f-user",style:{overflow:"hidden"}},[s(X,{onClick:v=>G(o)},{default:c(()=>[s(p(ue))]),_:2},1032,["onClick"]),Ee,a("span",Ve,y(o.name),1)]))),128))])])])]),_:1})]),_:1})])]),_:1},8,["modelValue"])}}});var je=ae(Ae,[["__scopeId","data-v-6fd9718f"]]);export{je as O};
