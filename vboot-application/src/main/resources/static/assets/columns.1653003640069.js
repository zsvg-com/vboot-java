var E=Object.defineProperty;var B=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var R=(e,l,o)=>l in e?E(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o,$=(e,l)=>{for(var o in l||(l={}))G.call(l,o)&&R(e,o,l[o]);if(B)for(var o of B(l))J.call(l,o)&&R(e,o,l[o]);return e};import{a as D,j as F,s as b,aB as K,aF as W,a3 as Y,k as Z,m as q,I as Q,aG as X,ag as ee,l as te,n as se,a2 as d,o as f,b as y,Z as m,S as H,e as C,F as ne,a7 as oe,M as _,Y as O,B as le,R as S,W as T}from"./vue.1653003640069.js";import{J as ie,u as N,K as ae,_ as w}from"./index.1653003640069.js";import{A as re}from"./aside.1653003640069.js";import{H as ue,M as ce}from"./main.1653003640069.js";import"./logo-mini.1653003640069.js";import"./parent.1653003640069.js";const de=D({name:"layoutColumnsAside",setup(){const e=F([]),l=F(),{proxy:o}=te(),p=ie(),M=N(),{routesList:k,isColumnsMenuHover:h,isColumnsNavHover:A}=b(p),{themeConfig:n}=b(M),r=K(),c=W(),s=Y({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),g=t=>{s.liIndex=t,l.value.style.top=`${e.value[t].offsetTop+s.difference}px`},P=(t,i)=>{g(i);let{path:a,redirect:u}=t;u?c.push(u):c.push(a)},x=(t,i)=>{let{path:a}=t;s.liOldPath=a,s.liOldIndex=i,s.liHoverIndex=i,o.mittBus.emit("setSendColumnsChildren",v(a)),p.setColumnsMenuHover(!1),p.setColumnsNavHover(!0)},j=async()=>{await p.setColumnsNavHover(!1),setTimeout(()=>{!h&&!A&&o.mittBus.emit("restoreDefault")},100)},I=t=>{se(()=>{g(t)})},V=()=>{s.columnsAsideList=L(k.value);const t=v(r.path);if(Object.keys(t).length<=0)return!1;I(t.item[0].k),o.mittBus.emit("setSendColumnsChildren",t)},v=t=>{const i=t.split("/");let a={};return s.columnsAsideList.map((u,z)=>{u.path===`/${i[1]}`&&(u.k=z,a.item=[$({},u)],a.children=[$({},u)],u.children&&(a.children=u.children))}),a},L=t=>t.filter(i=>!i.meta.isHide).map(i=>(i=Object.assign({},i),i.children&&(i.children=L(i.children)),i)),U=t=>{s.routeSplit=t.split("/"),s.routeSplit.shift();const i=`/${s.routeSplit[0]}`,a=s.columnsAsideList.find(u=>u.path===i);if(!a)return!1;setTimeout(()=>{I(a.k)},0)};return Z(ae.state,t=>{if(t.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?s.difference=3:s.difference=0,!t.routesList.isColumnsMenuHover&&!t.routesList.isColumnsNavHover)s.liHoverIndex=null,o.mittBus.emit("setSendColumnsChildren",v(r.path));else{if(s.liHoverIndex=s.liOldIndex,!s.liOldPath)return!1;o.mittBus.emit("setSendColumnsChildren",v(s.liOldPath))}},{deep:!0}),q(()=>{V(),o.mittBus.on("restoreDefault",()=>{s.liOldIndex=null,s.liOldPath=null})}),Q(()=>{o.mittBus.off("restoreDefault",()=>{})}),X(t=>{U(t.path),o.mittBus.emit("setSendColumnsChildren",v(t.path))}),$({themeConfig:n,columnsAsideOffsetTopRefs:e,columnsAsideActiveRef:l,onColumnsAsideDown:I,onColumnsAsideMenuClick:P,onColumnsAsideMenuMouseenter:x,onColumnsAsideMenuMouseleave:j},ee(s))}}),me={class:"layout-columns-aside"},fe=["onClick","onMouseenter","title"],pe={class:"columns-vertical-title font12"},he=["href"],Ce={class:"columns-vertical-title font12"};function _e(e,l,o,p,M,k){const h=d("SvgIcon"),A=d("el-scrollbar");return f(),y("div",me,[m(A,null,{default:H(()=>[C("ul",{onMouseleave:l[0]||(l[0]=n=>e.onColumnsAsideMenuMouseleave())},[(f(!0),y(ne,null,oe(e.columnsAsideList,(n,r)=>(f(),y("li",{key:r,onClick:c=>e.onColumnsAsideMenuClick(n,r),onMouseenter:c=>e.onColumnsAsideMenuMouseenter(n,r),ref_for:!0,ref:c=>{c&&(e.columnsAsideOffsetTopRefs[r]=c)},class:_({"layout-columns-active":e.liIndex===r,"layout-columns-hover":e.liHoverIndex===r}),title:e.$t(n.meta.title)},[!n.meta.isLink||n.meta.isLink&&n.meta.isIframe?(f(),y("div",{key:0,class:_(e.themeConfig.columnsAsideLayout)},[m(h,{name:n.meta.icon},null,8,["name"]),C("div",pe,O(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,e.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],2)):(f(),y("div",{key:1,class:_(e.themeConfig.columnsAsideLayout)},[C("a",{href:n.meta.isLink,target:"_blank"},[m(h,{name:n.meta.icon},null,8,["name"]),C("div",Ce,O(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,e.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],8,he)],2))],42,fe))),128)),C("div",{ref:"columnsAsideActiveRef",class:_(e.themeConfig.columnsAsideStyle)},null,2)],32)]),_:1})])}var Ae=w(de,[["render",_e],["__scopeId","data-v-86f48d02"]]);const ve=D({name:"layoutColumns",components:{Aside:re,Header:ue,Main:ce,ColumnsAside:Ae},setup(){const e=N(),{themeConfig:l}=b(e);return{isFixedHeader:le(()=>l.value.isFixedHeader)}}}),ye={class:"layout-columns-warp"};function ge(e,l,o,p,M,k){const h=d("ColumnsAside"),A=d("Aside"),n=d("Header"),r=d("Main"),c=d("el-scrollbar"),s=d("el-container"),g=d("el-backtop");return f(),S(s,{class:"layout-container"},{default:H(()=>[m(h),C("div",ye,[m(A),m(s,{class:_(["flex-center layout-backtop",{"layout-backtop":!e.isFixedHeader}])},{default:H(()=>[e.isFixedHeader?(f(),S(n,{key:0})):T("",!0),m(c,{class:_({"layout-backtop":e.isFixedHeader})},{default:H(()=>[e.isFixedHeader?T("",!0):(f(),S(n,{key:0})),m(r)]),_:1},8,["class"])]),_:1},8,["class"])]),m(g,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}var Le=w(ve,[["render",ge]]);export{Le as default};
