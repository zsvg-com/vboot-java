var M=Object.defineProperty,U=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var F=(i,e,a)=>e in i?M(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a,w=(i,e)=>{for(var a in e||(e={}))I.call(e,a)&&F(i,a,e[a]);if(D)for(var a of D(e))K.call(e,a)&&F(i,a,e[a]);return i},y=(i,e)=>U(i,N(e));import{a as J,a3 as O,m as P,b as Q,Z as o,S as l,a2 as p,aa as R,o as C,u as t,a9 as X,T as g,R as Y,e as _,Y as Z,U as v,X as m}from"./vue.1653003640069.js";import{l as d,t as q,a as G,c as H,b as L}from"./index.16530036400695.js";import{p as W,f as ee,v as te,E as f,g as E,s as B}from"./index.1653003640069.js";const ue=m("\u67E5 \u8BE2"),ne=m("\u65B0\u589E"),oe=m("\u542F \u7528"),le=m("\u7981 \u7528"),ae=m("\u5220\u9664"),ie=["onClick"],se={name:"sysJobMain"},me=J(y(w({},se),{setup(i){const e=O({url:"/sys/job/main",loading:!0,ids:[],form:{},single:!0,multiple:!0,list:[],total:0});P(()=>{d(e)});async function a(s){const u=s.ids.join(",");if(u.length<=0){f.warning("\u8BF7\u9009\u62E9\u540E\u518D\u8FDB\u884C\u542F\u52A8");return}E.confirm("\u786E\u8BA4\u8981\u542F\u52A8\u9009\u62E9\u9879\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"info"}).then(async()=>{await B({url:s.url+"/start/"+u,method:"post"}),await d(s)}).catch(()=>f.info("\u5DF2\u53D6\u6D88\u542F\u52A8"))}async function x(s){const u=s.ids.join(",");if(u.length<=0){f.warning("\u8BF7\u9009\u62E9\u540E\u518D\u8FDB\u884C\u5173\u95ED");return}E.confirm("\u786E\u8BA4\u8981\u5173\u95ED\u9009\u62E9\u9879\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"info"}).then(async()=>{await B({url:s.url+"/stop/"+u,method:"post"}),await d(s)}).catch(()=>f.info("\u5DF2\u53D6\u6D88\u5173\u95ED"))}const h=async s=>{E.confirm("\u786E\u5B9A\u7ACB\u5373\u6267\u884C\u4E00\u6B21\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"info"}).then(async()=>{await B({url:e.url+"/once/"+s,method:"post"})})};return(s,u)=>{const A=p("el-input"),c=p("el-button"),b=p("el-col"),k=p("el-row"),r=p("el-table-column"),$=p("el-icon"),z=p("el-table"),S=p("el-pagination"),T=p("el-card"),V=R("loading");return C(),Q("div",null,[o(T,{class:"box-card"},{header:l(()=>[o(k,null,{default:l(()=>[o(b,{span:14},{default:l(()=>[o(A,{modelValue:t(e).form.name,"onUpdate:modelValue":u[0]||(u[0]=n=>t(e).form.name=n),placeholder:"\u8F93\u5165\u540D\u79F0\u56DE\u8F66\u67E5\u8BE2",clearable:"",class:"list-search",onKeyup:u[1]||(u[1]=X(n=>t(d)(t(e)),["enter"]))},null,8,["modelValue"]),o(c,{type:"primary",onClick:u[2]||(u[2]=n=>t(d)(t(e))),plain:""},{default:l(()=>[ue]),_:1})]),_:1}),o(b,{span:10,style:{"text-align":"right"}},{default:l(()=>[o(c,{type:"success",icon:t(W),onClick:u[3]||(u[3]=n=>t(q)(t(e).url)),plain:""},{default:l(()=>[ne]),_:1},8,["icon"]),o(c,{disabled:t(e).multiple,onClick:u[4]||(u[4]=n=>a(t(e))),plain:""},{default:l(()=>[oe]),_:1},8,["disabled"]),o(c,{disabled:t(e).multiple,onClick:u[5]||(u[5]=n=>x(t(e))),plain:""},{default:l(()=>[le]),_:1},8,["disabled"]),o(c,{type:"danger",icon:t(ee),disabled:t(e).multiple,onClick:u[6]||(u[6]=n=>t(G)(t(e))),plain:""},{default:l(()=>[ae]),_:1},8,["icon","disabled"])]),_:1})]),_:1})]),default:l(()=>[g((C(),Y(z,{height:"400","cell-style":{padding:"2px"},"row-style":{height:"36px"},data:t(e).list,border:"",stripe:"",onSelectionChange:u[7]||(u[7]=n=>t(L)(n,t(e)))},{default:l(()=>[o(r,{type:"selection",width:"55",align:"center"}),o(r,{label:"\u5E8F\u53F7",type:"index",width:"55",align:"center"}),o(r,{label:"\u4EFB\u52A1\u540D\u79F0",width:"180"},{default:l(n=>[_("span",{style:{cursor:"pointer",color:"#3e9ece"},onClick:j=>t(H)(t(e).url,n.row.id)},Z(n.row.name),9,ie)]),_:1}),o(r,{label:"\u4EFB\u52A1\u4EE3\u7801",prop:"code",width:"200"}),o(r,{label:"\u8BF7\u6C42\u5730\u5740",prop:"reurl",width:"200"}),o(r,{label:"\u6267\u884C\u8868\u8FBE\u5F0F",prop:"cron",width:"200"}),o(r,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"crtim",width:"160"}),o(r,{label:"\u72B6\u6001",prop:"crtim",width:"60"},{default:l(n=>[g(_("span",null,"\u542F\u7528",512),[[v,n.row.avtag===!0]]),g(_("span",null,"\u7981\u7528",512),[[v,n.row.avtag===!1]])]),_:1}),o(r,{label:"\u5907\u6CE8",prop:"notes"}),o(r,{label:"\u64CD\u4F5C",prop:"notes",width:"46",align:"center"},{default:l(n=>[o($,{size:20,style:{top:"3px",color:"green",cursor:"pointer"},onClick:j=>h(n.row.id),title:"\u7ACB\u5373\u6267\u884C\u4E00\u6B21"},{default:l(()=>[o(t(te))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[V,t(e).loading]]),o(S,{onSizeChange:u[8]||(u[8]=n=>t(d)(t(e))),onCurrentChange:u[9]||(u[9]=n=>t(d)(t(e))),class:"mt8","pager-count":5,"page-sizes":[10,20,30],background:"",total:t(e).total,"current-page":t(e).form.page,"onUpdate:current-page":u[10]||(u[10]=n=>t(e).form.page=n),"page-size":t(e).form.pageSize,"onUpdate:page-size":u[11]||(u[11]=n=>t(e).form.pageSize=n),layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","current-page","page-size"])]),_:1})])}}}));export{me as default};
