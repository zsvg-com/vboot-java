var T=($,x,r)=>new Promise((_,a)=>{var g=e=>{try{f(r.next(e))}catch(u){a(u)}},b=e=>{try{f(r.throw(e))}catch(u){a(u)}},f=e=>e.done?_(e.value):Promise.resolve(e.value).then(g,b);f((r=r.apply($,x)).next())});import{ah as j}from"./index.6733effe.js";import{A,r as w,P as M,bG as v,a0 as m,B as R,a1 as H,a6 as c,H as p,w as i,u as h,J as O,ae as D,$ as P}from"./vendor.af2fe88b.js";const U={class:"zdept",style:{height:"450px"}},F={class:"flex px-2 py-1.5 items-center basic-tree-header"},G={class:"flex flex-1 justify-self-stretch items-center cursor-pointer"},J=p("hr",null,null,-1),q=D("\u63D0\u4EA4"),I=D("\u5173\u95ED"),L=D("\u53D6\u6D88\u9009\u62E9"),Y=A({emits:["select"],setup($,{expose:x,emit:r}){let _="";const a=w({}),g=({column:t,row:n,triggerTreeNode:o})=>{o||a.value.toggleTreeExpand(n)},b=()=>{const t=d.value,o=a.value.getCurrentRecord();r("select",{id:o.id,name:o.name,type:o.type}),t.close()};function f(){k()}w("");const e=M({filterName:"",value8:!1,tableData:[],originData:[],tableTreeConfig:{children:"children",rowKey:"id",indent:15,parentKey:"pid",iconOpen:"vxe-icon--arrow-bottom",iconClose:"vxe-icon--arrow-right"}}),u=()=>{const t=v.toValueString(e.filterName).trim();if(t){const n={children:"children"},o=["name"];e.tableData=v.searchTree(e.originData,s=>o.some(y=>v.toValueString(s[y]).indexOf(t)>-1),n),P(()=>{a.value.setAllTreeExpand(!0)})}else e.tableData=e.originData},E=v.debounce(function(){u()},500,{leading:!1,trailing:!0});function k(){return T(this,null,function*(){e.originData=yield j.get({url:_}),u()})}const d=w({});function N(t){_=t.url;const n=d.value;k(),n.open()}function V(){d.value.close()}function z(){const t=d.value;a.value.getCurrentRecord(),r("select",null),t.close()}function B(){const t=d.value,o=a.value.getCurrentRecord();r("select",{id:o.id,name:o.name,type:o.type}),t.close()}return x({open:N}),(t,n)=>{const o=m("vxe-input"),s=m("vxe-button"),y=m("vxe-column"),K=m("vxe-table"),S=m("vxe-modal");return R(),H(S,{ref:(l,C)=>{C.xModal=l,d.value=l},"show-footer":"",title:"\u5F39\u6846\u9009\u62E9",width:"400",height:"560","mask-closable":"","show-zoom":"",resize:"",remember:""},{default:c(()=>[p("div",U,[p("div",F,[p("div",G,[i(o,{modelValue:h(e).filterName,"onUpdate:modelValue":n[0]||(n[0]=l=>h(e).filterName=l),placeholder:"\u641C\u7D22",style:{width:"200px"},type:"type",onKeyup:h(E)},null,8,["modelValue","onKeyup"]),i(s,{icon:"vxe-icon--refresh",title:"\u5237\u65B0",circle:"",onClick:f,style:{"margin-left":"4px","margin-right":"2px"}})])]),J,i(K,{ref:(l,C)=>{C.xTree=l,a.value=l},resizable:"","show-overflow":"","row-key":"",border:"none",size:"mini",height:"400px","highlight-current-row":"","highlight-hover-row":"","show-header":!1,onCellClick:g,onCellDblclick:b,"row-config":{height:26},"tree-config":h(e).tableTreeConfig,data:h(e).tableData},{default:c(()=>[i(y,{field:"name",title:"Name","tree-node":""},{default:c(({row:l})=>[p("span",null,O(l.name),1)]),_:1})]),_:1},8,["tree-config","data"])])]),footer:c(()=>[i(s,{status:"primary",onClick:B},{default:c(()=>[q]),_:1}),i(s,{onClick:V},{default:c(()=>[I]),_:1}),i(s,{onClick:z},{default:c(()=>[L]),_:1})]),_:1},512)}}});export{Y as _};
