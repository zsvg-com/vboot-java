var _=(k,M,i)=>new Promise((h,b)=>{var E=d=>{try{x(i.next(d))}catch(C){b(C)}},B=d=>{try{x(i.throw(d))}catch(C){b(C)}},x=d=>d.done?h(d.value):Promise.resolve(d.value).then(E,B);x((i=i.apply(k,M)).next())});import{A as G,r as I,a0 as A,B as v,a1 as K,a6 as u,w as c,u as n,bq as Q,bS as q,H as s,bT as Y,D as m,ap as S,b1 as P,J as w,ab as j,bU as Z,ba as ee,b9 as $,bV as ae,bW as te,bX as se,a4 as le,ae as g,L as oe,N as ce,t as z}from"./vendor.8e08a5be.js";/* empty css               *//* empty css               *//* empty css              */import{a as ne,B as ue}from"./index.7c24f3ba.js";import{_ as re}from"./index.fa31d1d6.js";import{P as ie}from"./index.4a6d20cf.js";import{_ as de,ah as F}from"./index.1f50be75.js";const D=k=>(oe("data-v-507bb0ad"),k=k(),ce(),k),fe=g("\u5FEB\u6377\u641C\u7D22"),pe=g("\u67E5\u8BE2"),he={style:{"margin-top":"5px",overflow:"auto",height:"353px",border:"1px solid #ccc"}},_e={class:"z-org-search",id:"zOrgSearch",style:{padding:"2px"}},ve=["onClick"],ge=D(()=>s("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),ke={class:"layui-elip f-user-name"},be={class:"layui-elip f-user-dept"},ye=g("\u5C42\u7EA7\u67B6\u6784"),me={style:{height:"390px",border:"1px solid #ccc"}},xe={style:{border:"1px solid #ccc",height:"390px","margin-left":"5px",overflow:"auto"}},Ce={class:"z-org-tree"},Ie=["onClick"],we=D(()=>s("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),Fe={class:"layui-elip f-user-name"},Ee={class:"layui-elip f-user-dept"},Be=g("\u5E38\u7528\u7FA4\u7EC4"),qe=g(" \u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1 "),De=g("\u6211\u7684\u6536\u85CF"),Me=g(" \u8FD9\u4E2A\u4E5F\u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1 "),Oe={class:"w-1/3 xl:w-1/3",style:{"margin-left":"5px"}},Se=D(()=>s("div",{style:{height:"30px"}},[s("div",{style:{"margin-top":"16px"}},"\u5DF2 \u9009")],-1)),je={style:{border:"1px solid #ccc",height:"390px",overflow:"auto"}},Te={class:"z-org-selected",style:{position:"relative"}},Ue=D(()=>s("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),Ae={class:"layui-elip f-user-name2"},Pe=G({emits:["closeModal","register"],setup(k,{emit:M}){let i=-1,h="1",b=1,E=null,B=!1;const[x,{setModalProps:d,closeModal:C}]=ne(a=>_(this,null,function*(){if(i!=a.orgType&&(i=a.orgType,yield N(),f.value.splice(0,f.value.length)),b=a.selectMode,E=a.opener,t.value=a.orgs?a.orgs:[],h==="1")for(const e of p.value)for(const l of t.value){let r=!1;if(l.id==e.id){e.checked=!0,r=!0;break}r||(e.checked=!1)}else if(h==="2")for(const e of f.value)for(const l of t.value){let r=!1;if(l.id==e.id){e.checked=!0,r=!0;break}r||(e.checked=!1)}}));function H(){try{d({confirmLoading:!0}),C(),t.value&&t.value.length>0&&F.post({url:"/gen/org/rece",data:z(t.value)});const a={opener:E,orgs:z(t.value)};M("closeModal",a)}finally{d({confirmLoading:!1})}}function L(a){return _(this,null,function*(){if(h=a,a==="1")for(const e of p.value){let l=!1;for(const r of t.value)if(r.id==e.id){e.checked=!0,l=!0;break}l||(e.checked=!1)}else if(a==="2"){B||(yield V(),B=!0);for(const e of f.value){let l=!1;for(const r of t.value)if(r.id==e.id){e.checked=!0,l=!0;break}l||(e.checked=!1)}}})}const p=I([]),O=I("");function T(){return _(this,null,function*(){p.value=yield F.get({url:"/gen/org/main?type="+i,params:{name:O.value}});for(const a of p.value){let e=!1;for(const l of t.value)if(l.id==a.id){a.checked=!0,e=!0;break}e||(a.checked=!1)}})}function N(){return _(this,null,function*(){p.value=yield F.get({url:"/gen/org/rece?type="+i})})}function R(a){if(a.checked=!a.checked,b==1)t.value.length>0&&t.value.splice(0,1),t.value.push(a);else if(a.checked){let e=!1;for(const l of t.value)if(l.id===a.id){e=!0;break}e||t.value.push(a)}else for(let e=0;e<t.value.length;e++)if(t.value[e].id===a.id){t.value.splice(e,1);break}}const U=I([]);function V(){return _(this,null,function*(){U.value=yield F.get({url:"/gen/org/dept/tree"})})}const f=I([]);function W(a){return _(this,null,function*(){if(a.length>0){f.value=yield F.get({url:"/gen/org/main?type="+i,params:{deptid:a[0]}});for(const e of f.value)for(const l of t.value)if(l.id===e.id){e.checked=!0;break}}})}function J(a){if(a.checked=!a.checked,b==1)t.value.length>0&&t.value.splice(0,1),t.value.push(a);else if(a.checked){let e=!1;for(const l of t.value)if(l.id===a.id){e=!0;break}e||t.value.push(a)}else for(let e=0;e<t.value.length;e++)if(t.value[e].id===a.id){t.value.splice(e,1);break}}const t=I([]);function X(a){if(h==="1"){for(let e=0;e<p.value.length;e++)if(p.value[e].id===a.id){p.value[e].checked=!1;break}}else if(h==="2"){for(let e=0;e<f.value.length;e++)if(f.value[e].id===a.id){f.value[e].checked=!1;break}}for(let e=0;e<t.value.length;e++)if(t.value[e].id===a.id){t.value.splice(e,1);break}}return(a,e)=>{const l=A("a-input-search"),r=A("a-button");return v(),K(n(ue),le(a.$attrs,{onRegister:n(x),title:"\u7EC4\u7EC7\u67B6\u6784\u9009\u62E9",width:"1000px",height:440,onOk:H}),{default:u(()=>[c(n(ie),{dense:"",contentClass:"flex"},{default:u(()=>[c(n(Q),{type:"card",class:"w-2/3 xl:w-2/3",onChange:L},{default:u(()=>[c(n(q),{key:"1"},{tab:u(()=>[s("span",null,[c(n(Y)),fe])]),default:u(()=>[s("div",null,[c(l,{onSearch:T,value:O.value,"onUpdate:value":e[0]||(e[0]=o=>O.value=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u67E5\u8BE2",style:{width:"200px"}},null,8,["value"]),c(r,{type:"primary",style:{"margin-left":"10px"},onClick:T},{default:u(()=>[pe]),_:1})]),s("div",he,[s("ul",_e,[(v(!0),m(j,null,S(p.value,o=>(v(),m("li",{key:o.id,class:"f-user",onClick:y=>R(o)},[c(n(P),{checked:o.checked,"onUpdate:checked":y=>o.checked=y},null,8,["checked","onUpdate:checked"]),ge,s("span",ke,w(o.name),1),s("span",be,w(o.dept),1)],8,ve))),128))])])]),_:1}),c(n(q),{key:"2"},{tab:u(()=>[s("span",null,[c(n(Z)),ye])]),default:u(()=>[c(n(ee),null,{default:u(()=>[c(n($),{span:12},{default:u(()=>[s("div",me,[c(n(re),{title:"\u90E8\u95E8\u5217\u8868",toolbar:"",search:"",treeData:U.value,replaceFields:{key:"id",title:"name"},onSelect:W},null,8,["treeData"])])]),_:1}),c(n($),{span:12},{default:u(()=>[s("div",xe,[s("ul",Ce,[(v(!0),m(j,null,S(f.value,o=>(v(),m("li",{key:o.id,class:"f-user",title:"444444444",onClick:y=>J(o)},[c(n(P),{checked:o.checked,"onUpdate:checked":y=>o.checked=y},null,8,["checked","onUpdate:checked"]),we,s("span",Fe,w(o.name),1),s("span",Ee,w(o.dept),1)],8,Ie))),128))])])]),_:1})]),_:1})]),_:1}),c(n(q),{key:"3"},{tab:u(()=>[s("span",null,[c(n(ae)),Be])]),default:u(()=>[qe]),_:1}),c(n(q),{key:"4"},{tab:u(()=>[s("span",null,[c(n(te)),De])]),default:u(()=>[Me]),_:1})]),_:1}),s("div",Oe,[Se,s("div",je,[s("ul",Te,[(v(!0),m(j,null,S(t.value,o=>(v(),m("li",{key:o.id,class:"f-user",style:{overflow:"hidden"}},[c(n(se),{onClick:y=>X(o)},null,8,["onClick"]),Ue,s("span",Ae,w(o.name),1)]))),128))])])])]),_:1})]),_:1},16,["onRegister"])}}});var Xe=de(Pe,[["__scopeId","data-v-507bb0ad"]]);export{Xe as O};
