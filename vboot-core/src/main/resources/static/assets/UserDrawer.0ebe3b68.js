var F=(_,V,p)=>new Promise((x,a)=>{var g=n=>{try{m(p.next(n))}catch(s){a(s)}},w=n=>{try{m(p.throw(n))}catch(s){a(s)}},m=n=>n.done?x(n.value):Promise.resolve(n.value).then(g,w);m((p=p.apply(_,V)).next())});import{a as E,B as C}from"./index.f06a4b68.js";import{u as y}from"./index.5f1c2524.js";import{ah as M}from"./index.49385d3b.js";import{O as R}from"./OrgModal.179b5c8d.js";import{h as T}from"./edit.2a1803df.js";import{A,P as O,j as k,a0 as f,B as S,D as N,w as t,a5 as o,u,bt as P,ad as h,J as v,a4 as $,aa as z,t as H}from"./vendor.a4547d8e.js";/* empty css               */import"./useWindowSizeFn.01f243df.js";/* empty css               *//* empty css               *//* empty css              */import"./Tree.vue_vue&type=style&index=0&lang.156930fd.js";/* empty css               */import"./index.0aef37d2.js";/* empty css               *//* empty css               */import"./useContentViewHeight.7c57433e.js";const ne=A({emits:["success","register"],setup(_,{emit:V}){const[p,{openModal:x}]=y(),a=O({loadingText:"",url:"/sys/org/user",data:{},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}]}}),[g,{setDrawerProps:w,changeLoading:m,closeDrawer:n}]=E(i=>F(this,null,function*(){a.loadingText="\u52A0\u8F7D\u4E2D",m(!0),i.record.id?a.data=yield M.get({url:a.url+"/one/"+i.record.id}):(a.data=i.record,a.data.dept&&a.data.dept.id===""&&(a.data.dept=null),a.data.avtag=!0),m(!1)})),s=k(()=>a.data.dept?a.data.dept.name:"");function j(){x(!0,{opener:"dept",orgType:2,selectMode:1,orgs:a.data.dept&&a.data.dept.id?[H(a.data.dept)]:[]})}function U(i){i.opener=="dept"&&(a.data.dept=i.orgs[0])}return(i,c)=>{const r=f("vxe-input"),d=f("vxe-form-item"),b=f("vxe-switch"),B=f("vxe-textarea"),D=f("vxe-form");return S(),N(z,null,[t(u(C),$(i.$attrs,{loadingText:u(a).loadingText,showFooter:"",title:"\u7528\u6237\u4FE1\u606F",width:"70%",onOk:c[1]||(c[1]=e=>u(T)(i.$refs.xForm,u(a),V,u(w),u(m),u(n))),onRegister:u(g)}),{default:o(()=>[t(D,{"title-colon":"",ref:(e,l)=>{l.xForm=e},"title-align":"right","title-width":"100",data:u(a).data,rules:u(a).rules},{default:o(()=>[t(d,{title:"\u59D3\u540D",field:"name","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(r,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u6635\u79F0",field:"ninam","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(r,{modelValue:e.ninam,"onUpdate:modelValue":l=>e.ninam=l,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u767B\u5F55\u540D",field:"usnam","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(r,{modelValue:e.usnam,"onUpdate:modelValue":l=>e.usnam=l,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u5BC6\u7801",field:"pacod","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(r,{modelValue:e.pacod,"onUpdate:modelValue":l=>e.pacod=l,type:"password",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u6240\u5C5E\u90E8\u95E8",field:"dept","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(r,{modelValue:u(s),"onUpdate:modelValue":c[0]||(c[0]=l=>P(s)?s.value=l:null),"suffix-icon":"vxe-icon--search",readonly:"",onClick:j},null,8,["modelValue"])]),_:1}),t(d,{title:"\u804C\u52A1",field:"job","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(r,{modelValue:e.job,"onUpdate:modelValue":l=>e.job=l,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u624B\u673A\u53F7",field:"monum","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(r,{modelValue:e.monum,"onUpdate:modelValue":l=>e.monum=l,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u90AE\u7BB1",field:"email","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(r,{modelValue:e.email,"onUpdate:modelValue":l=>e.email=l,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u662F\u5426\u53EF\u7528",field:"avtag","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(b,{modelValue:e.avtag,"onUpdate:modelValue":l=>e.avtag=l,"open-label":"\u662F","close-label":"\u5426"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u6392\u5E8F\u53F7",field:"ornum","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[t(r,{modelValue:e.ornum,"onUpdate:modelValue":l=>e.ornum=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u7528\u6237\u5907\u6CE8",field:"notes","item-render":{},span:"24","title-width":"150"},{default:o(({data:e})=>[t(B,{modelValue:e.notes,"onUpdate:modelValue":l=>e.notes=l,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",autosize:{minRows:4,maxRows:6},clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(d,{title:"\u521B\u5EFA\u65F6\u95F4",field:"crtim","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[h(v(e.crtim),1)]),_:1}),t(d,{title:"\u66F4\u65B0\u65F6\u95F4",field:"uptim","item-render":{},span:"12","title-width":"150"},{default:o(({data:e})=>[h(v(e.uptim),1)]),_:1})]),_:1},8,["data","rules"])]),_:1},16,["loadingText","onRegister"]),t(R,{onRegister:u(p),onCloseModal:U},null,8,["onRegister"])],64)}}});export{ne as default};
