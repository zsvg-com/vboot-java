var S=Object.defineProperty,P=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var D=(a,t,e)=>t in a?S(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,F=(a,t)=>{for(var e in t||(t={}))G.call(t,e)&&D(a,e,t[e]);if($)for(var e of $(t))H.call(t,e)&&D(a,e,t[e]);return a},B=(a,t)=>P(a,z(t));var V=(a,t,e)=>new Promise((c,g)=>{var v=u=>{try{p(e.next(u))}catch(i){g(i)}},n=u=>{try{p(e.throw(u))}catch(i){g(i)}},p=u=>u.done?c(u.value):Promise.resolve(u.value).then(v,n);p((e=e.apply(a,t)).next())});import{P as O}from"./index.0248b5d5.js";import{ah as K,k as U}from"./index.6733effe.js";import{A as j,r as y,P as E,bG as C,_ as W,a0 as h,B as T,D as q,H as b,w as s,u as d,a6 as _,J as N,$ as M,a1 as J,a4 as I,ae as k}from"./vendor.af2fe88b.js";import{a as L}from"./index.22b4830b.js";import{c as Q,d as R}from"./list.fd3e66c9.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.4124f9cf.js";import"./useContentViewHeight.b4e0fa30.js";/* empty css               */const X={class:"bg-white m-4 mr-0 overflow-hidden zcate"},Y={class:"flex px-2 py-1.5 items-center basic-tree-header"},Z={class:"flex flex-1 justify-self-stretch items-center cursor-pointer"},ee=b("hr",null,null,-1),te=j({emits:["select"],setup(a,{emit:t}){const e=y({}),c=({column:l,row:o,triggerTreeNode:m})=>{m||(e.value.toggleTreeExpand(o),t("select",{id:o.id,name:o.name}))};function g(){t("select",null)}function v(){i()}y("");const n=E({filterName:"",tableData:[],originData:[],tableTreeConfig:{children:"children",rowKey:"id",indent:15,parentKey:"pid",iconOpen:"vxe-icon--arrow-bottom",iconClose:"vxe-icon--arrow-right"}}),p=()=>{const l=C.toValueString(n.filterName).trim();if(l){const o={children:"children"},m=["name"];n.tableData=C.searchTree(n.originData,f=>m.some(r=>C.toValueString(f[r]).indexOf(l)>-1),o),M(()=>{e.value.setAllTreeExpand(!0)})}else n.tableData=n.originData},u=C.debounce(function(){p()},500,{leading:!1,trailing:!0});function i(){return V(this,null,function*(){n.originData=yield K.get({url:"/wf/tem/cate/tree"}),p()})}return W(()=>{i()}),(l,o)=>{const m=h("vxe-input"),f=h("vxe-button"),r=h("vxe-column"),w=h("vxe-table");return T(),q("div",X,[b("div",Y,[b("div",Z,[s(m,{modelValue:d(n).filterName,"onUpdate:modelValue":o[0]||(o[0]=x=>d(n).filterName=x),placeholder:"\u641C\u7D22",style:{width:"120px"},type:"type",onKeyup:d(u)},null,8,["modelValue","onKeyup"]),s(f,{icon:"vxe-icon--refresh",title:"\u5237\u65B0",circle:"",onClick:v,style:{"margin-left":"4px","margin-right":"2px"}}),s(f,{icon:"vxe-icon--dot",title:"\u6839\u76EE\u5F55",circle:"",onClick:g,style:{"margin-left":"2px","margin-right":"2px"}}),s(f,{icon:"vxe-icon--caret-bottom",title:"\u5C55\u5F00",circle:"",onClick:o[1]||(o[1]=x=>l.$refs.xCate.setAllTreeExpand(!0)),style:{"margin-left":"2px","margin-right":"2px"}}),s(f,{icon:"vxe-icon--caret-top",title:"\u6298\u53E0",circle:"",onClick:o[2]||(o[2]=x=>l.$refs.xCate.clearTreeExpand()),style:{"margin-left":"2px","margin-right":"2px"}})])]),ee,s(w,{ref:(x,A)=>{A.xCate=x,e.value=x},resizable:"","show-overflow":"","row-key":"",border:"none",size:"mini",height:"auto","highlight-current-row":"","highlight-hover-row":"","show-header":!1,onCellClick:c,"row-config":{height:26},"tree-config":d(n).tableTreeConfig,data:d(n).tableData},{default:_(()=>[s(r,{field:"name",title:"Name","tree-node":""},{default:_(({row:x})=>[b("span",null,N(x.name),1)]),_:1})]),_:1},8,["tree-config","data"])])}}}),ne={class:"w-3/4 xl:w-4/5 ztable"},ie=k("\u67E5 \u8BE2"),oe=k("\u65B0 \u589E"),ae=k("\u5220 \u9664"),le=["onClick"],re={name:"WfTemMain",inheritAttrs:!1,customOptions:{}};function se(a){const t=U(),e=y({}),c=E({name:"",cateid:"",catename:""}),g=E(Q("/wf/tem/main",{},c,[{type:"checkbox",align:"center",width:42,fixed:"left"},{type:"seq",align:"center",width:50,fixed:"left"},{field:"name",title:"\u6D41\u7A0B\u6A21\u677F",width:300,fixed:"left",slots:{default:"name_default"}},{field:"notes",title:"\u5907\u6CE8"},{field:"crtim",title:"\u521B\u5EFA\u65F6\u95F4",width:140},{field:"uptim",title:"\u66F4\u65B0\u65F6\u95F4",width:140}])),v=()=>{e.value.commitProxy("query")};function n(i){i!=null?(c.cateid=i.id,c.catename=i.name):(c.cateid="",c.catename=""),v()}function p(){t("/wf/tem/main/new?cateid="+c.cateid)}function u(i){t("/wf/tem/main/"+i)}return L(),(i,l)=>{const o=h("vxe-input"),m=h("vxe-button"),f=h("vxe-grid");return T(),J(d(O),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:_(()=>[s(te,{class:"w-1/4 xl:w-1/5",onSelect:n,style:{margin:"6px 0 6px 6px"}}),b("div",ne,[s(f,I({ref:(r,w)=>{w.xGrid=r,e.value=r}},d(g)),{tbtns:_(()=>[s(o,{modelValue:d(c).name,"onUpdate:modelValue":l[0]||(l[0]=r=>d(c).name=r),placeholder:"\u8F93\u5165\u540D\u79F0\u67E5\u8BE2"},null,8,["modelValue"]),s(m,{onClick:v,status:"primary"},{default:_(()=>[ie]),_:1}),s(m,{onClick:l[1]||(l[1]=r=>p())},{default:_(()=>[oe]),_:1}),s(m,{onClick:l[2]||(l[2]=r=>d(R)(i.$refs.xGrid))},{default:_(()=>[ae]),_:1})]),name_default:_(({row:r})=>[b("span",{style:{cursor:"pointer",color:"#3e9ece"},onClick:w=>u(r.id)},N(r.name),9,le)]),_:1},16)])]),_:1})}}const be=j(B(F({},re),{setup:se}));export{be as default};
