var k=Object.defineProperty,A=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var B=(e,s,a)=>s in e?k(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,w=(e,s)=>{for(var a in s||(s={}))x.call(s,a)&&B(e,a,s[a]);if(T)for(var a of T(s))j.call(s,a)&&B(e,a,s[a]);return e},y=(e,s)=>A(e,C(s));import{A as E,ao as _,bs as I,P as V,cU as L,am as O,j as h,W as S,a0 as r,B as g,a1 as W,a6 as u,H as t,w as l,ae as d,J as c,D as F,ap as P,ab as N}from"./vendor.af2fe88b.js";/* empty css               */import{P as U}from"./index.0248b5d5.js";import{_ as $,aU as H}from"./index.6733effe.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.4124f9cf.js";import"./useContentViewHeight.b4e0fa30.js";const J=E({components:{PageWrapper:U,[_.name]:_,InputTextArea:_.TextArea,Tag:I},setup(){const e=V({server:"ws://localhost:3300/test",sendValue:"",recordList:[]}),{status:s,data:a,send:v,close:b,open:D}=L(e.server,{autoReconnect:!1,heartbeat:!0});O(()=>{if(a.value)try{const o=JSON.parse(a.value);e.recordList.push(o)}catch(o){e.recordList.push({res:a.value,id:Math.ceil(Math.random()*1e3),time:new Date().getTime()})}});const n=h(()=>s.value==="OPEN"),p=h(()=>n.value?"success":"red"),i=h(()=>[...e.recordList].reverse());function m(){v(e.sendValue),e.sendValue=""}function f(){n.value?b():D()}return y(w({status:s,formatToDateTime:H},S(e)),{handlerSend:m,getList:i,toggle:f,getIsOpen:n,getTagColor:p})}}),M={class:"flex"},R={class:"w-1/3 bg-white p-4"},z={class:"flex items-center"},q=t("span",{class:"text-lg font-medium mr-4"}," \u8FDE\u63A5\u72B6\u6001: ",-1),G=t("hr",{class:"my-4"},null,-1),K={class:"flex"},Q=d(" \u670D\u52A1\u5730\u5740 "),X=t("p",{class:"text-lg font-medium mt-4"},"\u8BBE\u7F6E",-1),Y=t("hr",{class:"my-4"},null,-1),Z=d(" \u53D1\u9001 "),ee={class:"w-2/3 bg-white ml-4 p-4"},se=t("span",{class:"text-lg font-medium mr-4"}," \u6D88\u606F\u8BB0\u5F55: ",-1),te=t("hr",{class:"my-4"},null,-1),ae={class:"max-h-80 overflow-auto"},oe={class:"flex items-center"},ne=t("span",{class:"mr-2 text-primary font-medium"},"\u6536\u5230\u6D88\u606F:",-1);function re(e,s,a,v,b,D){const n=r("Tag"),p=r("a-input"),i=r("a-button"),m=r("InputTextArea"),f=r("PageWrapper");return g(),W(f,{title:"WebSocket \u793A\u4F8B"},{default:u(()=>[t("div",M,[t("div",R,[t("div",z,[q,l(n,{color:e.getTagColor},{default:u(()=>[d(c(e.status),1)]),_:1},8,["color"])]),G,t("div",K,[l(p,{value:e.server,"onUpdate:value":s[0]||(s[0]=o=>e.server=o),disabled:""},{addonBefore:u(()=>[Q]),_:1},8,["value"]),l(i,{type:e.getIsOpen?"danger":"primary",onClick:e.toggle},{default:u(()=>[d(c(e.getIsOpen?"\u5173\u95ED\u8FDE\u63A5":"\u5F00\u542F\u8FDE\u63A5"),1)]),_:1},8,["type","onClick"])]),X,Y,l(m,{placeholder:"\u9700\u8981\u53D1\u9001\u5230\u670D\u52A1\u5668\u7684\u5185\u5BB9",disabled:!e.getIsOpen,value:e.sendValue,"onUpdate:value":s[1]||(s[1]=o=>e.sendValue=o),allowClear:""},null,8,["disabled","value"]),l(i,{type:"primary",block:"",class:"mt-4",disabled:!e.getIsOpen,onClick:e.handlerSend},{default:u(()=>[Z]),_:1},8,["disabled","onClick"])]),t("div",ee,[se,te,t("div",ae,[t("ul",null,[(g(!0),F(N,null,P(e.getList,o=>(g(),F("li",{class:"mt-2",key:o.time},[t("div",oe,[ne,t("span",null,c(e.formatToDateTime(o.time)),1)]),t("div",null,c(o.res),1)]))),128))])])])])]),_:1})}var he=$(J,[["render",re]]);export{he as default};
