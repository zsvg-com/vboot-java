var We=Object.defineProperty,qe=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var ke=(e,l,f)=>l in e?We(e,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):e[l]=f,E=(e,l)=>{for(var f in l||(l={}))Re.call(l,f)&&ke(e,f,l[f]);if(ye)for(var f of ye(l))Qe.call(l,f)&&ke(e,f,l[f]);return e},X=(e,l)=>qe(e,Je(l));var pe=(e,l,f)=>new Promise((p,m)=>{var s=_=>{try{y(f.next(_))}catch(g){m(g)}},i=_=>{try{y(f.throw(_))}catch(g){m(g)}},y=_=>_.done?p(_.value):Promise.resolve(_.value).then(s,i);y((f=f.apply(e,l)).next())});import{z as Ze,A as ne,aA as et,az as P,an as tt,r as J,j as F,S as U,T as nt,a0 as B,B as M,D as Y,a6 as lt,ac as V,a1 as le,a5 as z,ad as ge,J as xe,K as st,w as x,aa as R,ao as ct,aB as at,aR as rt,ax as it,u as h,n as ve,_ as be,$ as ot,ai as _e,b1 as dt,bw as Ke,aP as ut,ah as ht,P as Se,t as G,bK as ft,o as me,al as W,F as Ce,G as Ae,bL as Le,a4 as Te,ar as we,bx as se}from"./vendor.a4547d8e.js";import{i as yt,I as Q,ai as kt,p as C,b as pt,_ as gt,am as Ee,an as xt,a as vt,ao as bt,j as ce,ap as _t,aq as Kt,al as Ie,S as St,ar as mt,B as Me,ae as Ct}from"./index.49385d3b.js";/* empty css               */const At=({icon:e})=>e?yt(e)?Ze(Q,{icon:e,class:"mr-1"}):Q:null;var De;(function(e){e[e.SELECT_ALL=0]="SELECT_ALL",e[e.UN_SELECT_ALL=1]="UN_SELECT_ALL",e[e.EXPAND_ALL=2]="EXPAND_ALL",e[e.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",e[e.CHECK_STRICTLY=4]="CHECK_STRICTLY",e[e.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY"})(De||(De={}));const Lt=ne({name:"BasicTreeHeader",components:{BasicTitle:kt,Icon:Q,Dropdown:et,Menu:P,MenuItem:P.Item,MenuDivider:P.Divider,InputSearch:tt.Search},props:{helpMessage:{type:[String,Array],default:""},title:C.string,toolbar:C.bool,checkable:C.bool,search:C.bool,checkAll:C.func,expandAll:C.func,searchText:C.string},emits:["strictly-change","search"],setup(e,{emit:l,slots:f}){const{t:p}=pt(),m=J(""),s=F(()=>{const t=f.headerTitle||e.title;return["mr-1","w-full",{["ml-5"]:t}]}),i=F(()=>{const{checkable:t}=e,a=[{label:p("component.tree.expandAll"),value:2},{label:p("component.tree.unExpandAll"),value:3,divider:t}];return t?[{label:p("component.tree.selectAll"),value:0},{label:p("component.tree.unSelectAll"),value:1,divider:t},...a,{label:p("component.tree.checkStrictly"),value:4},{label:p("component.tree.checkUnStrictly"),value:5}]:a});function y(t){var r,c,u,o;const{key:a}=t;switch(a){case 0:(r=e.checkAll)==null||r.call(e,!0);break;case 1:(c=e.checkAll)==null||c.call(e,!1);break;case 2:(u=e.expandAll)==null||u.call(e,!0);break;case 3:(o=e.expandAll)==null||o.call(e,!1);break;case 4:l("strictly-change",!1);break;case 5:l("strictly-change",!0);break}}function _(t){l("search",t)}const g=nt(_,200);return U(()=>m.value,t=>{g(t)}),U(()=>e.searchText,t=>{t!==m.value&&(m.value=t)}),{t:p,toolbarList:i,handleMenuClick:y,searchValue:m,getInputSearchCls:s}}}),Tt={class:"flex px-2 py-1.5 items-center basic-tree-header"},wt={key:2,class:"flex flex-1 justify-self-stretch items-center cursor-pointer"};function Et(e,l,f,p,m,s){const i=B("BasicTitle"),y=B("InputSearch"),_=B("Icon"),g=B("MenuItem"),t=B("MenuDivider"),a=B("Menu"),r=B("Dropdown");return M(),Y("div",Tt,[e.$slots.headerTitle?lt(e.$slots,"headerTitle",{key:0},void 0,!0):V("",!0),!e.$slots.headerTitle&&e.title?(M(),le(i,{key:1,helpMessage:e.helpMessage},{default:z(()=>[ge(xe(e.title),1)]),_:1},8,["helpMessage"])):V("",!0),e.search||e.toolbar?(M(),Y("div",wt,[e.search?(M(),Y("div",{key:0,class:st(e.getInputSearchCls)},[x(y,{placeholder:e.t("common.searchText"),allowClear:"",value:e.searchValue,"onUpdate:value":l[0]||(l[0]=c=>e.searchValue=c)},null,8,["placeholder","value"])],2)):V("",!0),e.toolbar?(M(),le(r,{key:1,onClick:l[1]||(l[1]=it(()=>{},["prevent"]))},{overlay:z(()=>[x(a,{onClick:e.handleMenuClick},{default:z(()=>[(M(!0),Y(R,null,ct(e.toolbarList,c=>(M(),Y(R,{key:c.value},[x(g,at(rt({key:c.value})),{default:z(()=>[ge(xe(c.label),1)]),_:2},1040),c.divider?(M(),le(t,{key:0})):V("",!0)],64))),128))]),_:1},8,["onClick"])]),default:z(()=>[x(_,{icon:"ion:ellipsis-vertical"})]),_:1})):V("",!0)])):V("",!0)])}var It=gt(Lt,[["render",Et],["__scopeId","data-v-d16a1c4e"]]);function Mt(e,l){function f(t){const a=[],r=t||h(e),{key:c,children:u}=h(l);if(!u||!c)return a;for(let o=0;o<r.length;o++){const d=r[o];a.push(d[c]);const b=d[u];b&&b.length&&a.push(...f(b))}return a}function p(t){const a=[],r=t||h(e),{key:c,children:u}=h(l);if(!u||!c)return a;for(let o=0;o<r.length;o++){const d=r[o];d.disabled!==!0&&d.selectable!==!1&&a.push(d[c]);const b=d[u];b&&b.length&&a.push(...p(b))}return a}function m(t,a){const r=[],c=a||h(e),{key:u,children:o}=h(l);if(!o||!u)return r;for(let d=0;d<c.length;d++){const b=c[d],L=b[o];t===b[u]?(r.push(b[u]),L&&L.length&&r.push(...f(L))):L&&L.length&&r.push(...m(t,L))}return r}function s(t,a,r){if(!t)return;const c=r||h(e),{key:u,children:o}=h(l);if(!(!o||!u))for(let d=0;d<c.length;d++){const b=c[d],L=b[o];if(b[u]===t){c[d]=E(E({},c[d]),a);break}else L&&L.length&&s(t,a,b[o])}}function i(t=1,a,r=1){if(!t)return[];const c=[],u=a||h(e)||[];for(let o=0;o<u.length;o++){const d=u[o],{key:b,children:L}=h(l),Z=b?d[b]:"",H=L?d[L]:[];c.push(Z),H&&H.length&&r<t&&(r+=1,c.push(...i(t,H,r)))}return c}function y({parentKey:t=null,node:a,push:r="push"}){const c=ve(h(e));if(!t){c[r](a),e.value=c;return}const{key:u,children:o}=h(l);!o||!u||(Ee(c,d=>{if(d[u]===t)return d[o]=d[o]||[],d[o][r](a),!0}),e.value=c)}function _({parentKey:t=null,list:a,push:r="push"}){const c=ve(h(e));if(!(!a||a.length<1))if(t){const{key:u,children:o}=h(l);if(!o||!u)return;Ee(c,d=>{if(d[u]===t){d[o]=d[o]||[];for(let b=0;b<a.length;b++)d[o][r](a[b]);return e.value=c,!0}})}else for(let u=0;u<a.length;u++)c[r](a[u])}function g(t,a){if(!t)return;const r=a||h(e),{key:c,children:u}=h(l);if(!(!u||!c))for(let o=0;o<r.length;o++){const d=r[o],b=d[u];if(d[c]===t){r.splice(o,1);break}else b&&b.length&&g(t,d[u])}}return{deleteNodeByKey:g,insertNodeByKey:y,insertNodesByKey:_,filterByLevel:i,updateNodeByKey:s,getAllKeys:f,getChildrenKeys:m,getEnabledKeys:p}}function Dt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ke(e)}const ae="context-menu",Nt={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},Ne=e=>{const{item:l}=e;return x("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,l)},[e.showIcon&&l.icon&&x(Q,{class:"mr-2",icon:l.icon},null),x("span",null,[l.label])])};var Ft=ne({name:"ContextMenu",props:Nt,setup(e){const l=J(null),f=J(!1),p=F(()=>{const{axis:i,items:y,styles:_,width:g}=e,{x:t,y:a}=i||{x:0,y:0},r=(y||[]).length*40,c=g,u=document.body,o=u.clientWidth<t+c?t-c:t,d=u.clientHeight<a+r?a-r:a;return X(E({},_),{width:`${g}px`,left:`${o+1}px`,top:`${d+1}px`})});be(()=>{ot(()=>f.value=!0)}),_e(()=>{const i=h(l);i&&document.body.removeChild(i)});function m(i,y){const{handler:_,disabled:g}=i;g||(f.value=!1,y==null||y.stopPropagation(),y==null||y.preventDefault(),_==null||_())}function s(i){return i.map(y=>{const{disabled:_,label:g,children:t,divider:a=!1}=y,r={item:y,handler:m,showIcon:e.showIcon};return!t||t.length===0?x(R,null,[x(P.Item,{disabled:_,class:`${ae}__item`,key:g},{default:()=>[x(Ne,r,null)]}),a?x(dt,{key:`d-${g}`},null):null]):h(f)?x(P.SubMenu,{key:g,disabled:_,popupClassName:`${ae}__popup`},{title:()=>x(Ne,r,null),default:()=>s(t)}):null})}return()=>{let i;if(!h(f))return null;const{items:y}=e;return x(P,{inlineIndent:12,mode:"vertical",class:ae,ref:l,style:h(p)},Dt(i=s(y))?i:{default:()=>[i]})}}});const $={domList:[],resolve:()=>{}},Bt=function(e){const{event:l}=e||{};if(l&&(l==null||l.preventDefault()),!!xt)return new Promise(f=>{const p=document.body,m=document.createElement("div"),s={};e.styles&&(s.styles=e.styles),e.items&&(s.items=e.items),e.event&&(s.customEvent=l,s.axis={x:l.clientX,y:l.clientY});const i=x(Ft,s);ut(i,m);const y=function(){$.resolve("")};$.domList.push(m);const _=function(){$.domList.forEach(g=>{try{g&&p.removeChild(g)}catch(t){}}),p.removeEventListener("click",y),p.removeEventListener("scroll",y)};$.resolve=function(g){_(),f(g)},_(),p.appendChild(m),p.addEventListener("click",y),p.addEventListener("scroll",y)})},Fe=function(){$&&($.resolve(""),$.domList=[])};function $t(e=!0){return ht()&&e&&_e(()=>{Fe()}),[Bt,Fe]}const jt={value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:C.string,toolbar:C.bool,search:C.bool,searchValue:C.string,checkStrictly:C.bool,clickRowToExpand:C.bool.def(!0),checkable:C.bool.def(!1),defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:C.bool.def(!1),replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array},filterFn:{type:Function,default:null},highlight:{type:[Boolean,String],default:!1},expandOnSearch:C.bool.def(!1),checkOnSearch:C.bool.def(!1),selectedOnSearch:C.bool.def(!1)};function Ot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ke(e)}var Yt=ne({name:"BasicTree",inheritAttrs:!1,props:jt,emits:["update:expandedKeys","update:selectedKeys","update:value","change","check","update:searchValue"],setup(e,{attrs:l,slots:f,emit:p,expose:m}){const s=Se({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),i=Se({startSearch:!1,searchText:"",searchData:[]}),y=J([]),[_]=$t(),{prefixCls:g}=vt("basic-tree"),t=F(()=>{const{replaceFields:n}=e;return E({children:"children",title:"title",key:"key"},n)}),a=F(()=>{let n=X(E(E({blockNode:!0},l),e),{expandedKeys:s.expandedKeys,selectedKeys:s.selectedKeys,checkedKeys:s.checkedKeys,checkStrictly:s.checkStrictly,replaceFields:h(t),"onUpdate:expandedKeys":v=>{s.expandedKeys=v,p("update:expandedKeys",v)},"onUpdate:selectedKeys":v=>{s.selectedKeys=v,p("update:selectedKeys",v)},onCheck:(v,K)=>{let S=G(s.checkedKeys);if(bt(S)&&i.startSearch){const{key:A}=h(t);S=ft(S,H(K.node.$attrs.node[A])),K.checked&&S.push(K.node.$attrs.node[A]),s.checkedKeys=S}else s.checkedKeys=v;const k=G(s.checkedKeys);p("update:value",k),p("check",k,K)},onRightClick:je});return me(n,"treeData","class")}),r=F(()=>i.startSearch?i.searchData:h(y)),c=F(()=>!r.value||r.value.length===0),{deleteNodeByKey:u,insertNodeByKey:o,insertNodesByKey:d,filterByLevel:b,updateNodeByKey:L,getAllKeys:Z,getChildrenKeys:H,getEnabledKeys:Be}=Mt(y,t);function $e(n,v){return!v&&e.renderIcon&&ce(e.renderIcon)?e.renderIcon(n):v}function je(K){return pe(this,arguments,function*({event:n,node:v}){var I;const{rightMenuList:S=[],beforeRightClick:k}=e;let A={event:n,items:[]};if(k&&ce(k)){let T=yield k(v,n);Array.isArray(T)?A.items=T:Object.assign(A,T)}else A.items=S;!((I=A.items)==null?void 0:I.length)||_(A)})}function q(n){s.expandedKeys=n}function Oe(){return s.expandedKeys}function re(n){s.selectedKeys=n}function Pe(){return s.selectedKeys}function ie(n){s.checkedKeys=n}function Ue(){return s.checkedKeys}function oe(n){s.checkedKeys=n?Be():[]}function ee(n){s.expandedKeys=n?Z():[]}function Ve(n){s.checkStrictly=n}U(()=>e.searchValue,n=>{n!==i.searchText&&(i.searchText=n)},{immediate:!0}),U(()=>e.treeData,n=>{n&&te(i.searchText)});function te(n){if(n!==i.searchText&&(i.searchText=n),p("update:searchValue",n),!n){i.startSearch=!1;return}const{filterFn:v,checkable:K,expandOnSearch:S,checkOnSearch:k,selectedOnSearch:A}=h(e);i.startSearch=!0;const{title:I,key:T}=h(t),D=[];if(i.searchData=_t(h(y),w=>{var N,O;const j=v?v(n,w,h(t)):(O=(N=w[I])==null?void 0:N.includes(n))!=null?O:!1;return j&&D.push(w[T]),j},h(t)),S){const w=Kt(i.searchData).map(j=>j[T]);w&&w.length&&q(w)}k&&K&&D.length&&ie(D),A&&D.length&&re(D)}function He(n,v){if(!(!e.clickRowToExpand||!v||v.length===0))if(!s.expandedKeys.includes(n))q([...s.expandedKeys,n]);else{const K=[...s.expandedKeys],S=K.findIndex(k=>k===n);S!==-1&&K.splice(S,1),q(K)}}W(()=>{y.value=e.treeData}),be(()=>{const n=parseInt(e.defaultExpandLevel);n>0?s.expandedKeys=b(n):e.defaultExpandAll&&ee(!0)}),W(()=>{s.expandedKeys=e.expandedKeys}),W(()=>{s.selectedKeys=e.selectedKeys}),W(()=>{s.checkedKeys=e.checkedKeys}),U(()=>e.value,()=>{s.checkedKeys=G(e.value||[])}),U(()=>s.checkedKeys,()=>{const n=G(s.checkedKeys);p("update:value",n),p("change",n)}),W(()=>{s.checkStrictly=e.checkStrictly}),m({setExpandedKeys:q,getExpandedKeys:Oe,setSelectedKeys:re,getSelectedKeys:Pe,setCheckedKeys:ie,getCheckedKeys:Ue,insertNodeByKey:o,insertNodesByKey:d,deleteNodeByKey:u,updateNodeByKey:L,checkAll:oe,expandAll:ee,filterByLevel:n=>{s.expandedKeys=b(n)},setSearchValue:n=>{te(n)},getSearchValue:()=>i.searchText});function Xe(n){const{actionList:v}=e;if(!(!v||v.length===0))return v.map((K,S)=>{var A;let k=!0;return ce(K.show)?k=(A=K.show)==null?void 0:A.call(K,n):Me(K.show)&&(k=K.show),k?x("span",{key:S,class:`${g}__action`},[K.render(n)]):null})}function de({data:n,level:v}){if(!n)return null;const K=i.searchText,{highlight:S}=h(e);return n.map(k=>{var ue;const{title:A,key:I,children:T}=h(t),D=me(k,"title"),w=$e(X(E({},k),{level:v}),k.icon),j=se(k,T)||[],N=se(k,A),O=N.indexOf(K),Ye=i.startSearch&&!mt(K)&&S&&O!==-1,ze=`color: ${Me(S)?"#f50":S}`,Ge=Ye?x("span",{class:((ue=h(a))==null?void 0:ue.blockNode)?`${g}__content`:""},[x("span",null,[N.substr(0,O)]),x("span",{style:ze},[K]),x("span",null,[N.substr(O+K.length)])]):N;return x(Le.TreeNode,Te(D,{node:G(k),key:se(k,I)}),{title:()=>{var he,fe;return x("span",{class:`${g}-title pl-2`,onClick:He.bind(null,k[I],k[T])},[((he=k.slots)==null?void 0:he.title)?Ct(f,(fe=k.slots)==null?void 0:fe.title,k):x(R,null,[w&&x(At,{icon:w},null),Ge,x("span",{class:`${g}__actions`},[Xe(X(E({},k),{level:v}))])])])},default:()=>de({data:j,level:v+1})})})}return()=>{let n;const{title:v,helpMessage:K,toolbar:S,search:k,checkable:A}=e,I=v||S||k||f.headerTitle,T={height:"calc(100% - 38px)"};return x("div",{class:[g,"h-full",l.class]},[I&&x(It,{checkable:A,checkAll:oe,expandAll:ee,title:v,search:k,toolbar:S,helpMessage:K,onStrictlyChange:Ve,onSearch:te,searchText:i.searchText},Ot(n=Ie(f))?n:{default:()=>[n]}),Ce(x(St,{style:T},{default:()=>[x(Le,Te(h(a),{showIcon:!1}),E({default:()=>de({data:h(r),level:1})},Ie(f)))]}),[[Ae,!h(c)]]),Ce(x(we,{image:we.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[Ae,h(c)]])])}}});export{Yt as _};
