var _=(k,M,f)=>new Promise((h,b)=>{var F=p=>{try{x(f.next(p))}catch(C){b(C)}},B=p=>{try{x(f.throw(p))}catch(C){b(C)}},x=p=>p.done?h(p.value):Promise.resolve(p.value).then(F,B);x((f=f.apply(k,M)).next())});import{A as Y,r as I,a0 as N,B as v,a1 as Z,a6 as u,w as c,u as n,bq as G,bV as q,H as l,bW as K,D as m,ap as j,b1 as P,J as w,ab as S,bX as Q,ba as ee,b9 as U,bY as ae,bZ as te,b_ as le,a4 as se,ae as g,L as oe,N as ce,t as $}from"./vendor.af2fe88b.js";/* empty css               *//* empty css               *//* empty css              */import{a as ne,B as ue}from"./index.df186f99.js";import{_ as ie}from"./index.ddcbdb3f.js";import{P as re}from"./index.0248b5d5.js";import{_ as de,ah as E}from"./index.6733effe.js";const D=k=>(oe("data-v-4cf3c2af"),k=k(),ce(),k),fe=g("\u5FEB\u6377\u641C\u7D22"),pe=g("\u67E5\u8BE2"),he={style:{"margin-top":"5px",overflow:"auto",height:"353px",border:"1px solid #ccc"}},_e={class:"z-org-search",id:"zOrgSearch",style:{padding:"2px"}},ve=["onClick"],ge=D(()=>l("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),ke={class:"layui-elip f-user-name"},be={class:"layui-elip f-user-dept"},ye=g("\u5C42\u7EA7\u67B6\u6784"),me={style:{height:"390px",border:"1px solid #ccc"}},xe={style:{border:"1px solid #ccc",height:"390px","margin-left":"5px",overflow:"auto"}},Ce={class:"z-org-tree"},Ie=["onClick"],we=D(()=>l("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),Ee={class:"layui-elip f-user-name"},Fe={class:"layui-elip f-user-dept"},Be=g("\u5E38\u7528\u7FA4\u7EC4"),qe=g(" \u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1 "),De=g("\u6211\u7684\u6536\u85CF"),Me=g(" \u8FD9\u4E2A\u4E5F\u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1 "),Oe={class:"w-1/3 xl:w-1/3",style:{"margin-left":"5px"}},je=D(()=>l("div",{style:{height:"30px"}},[l("div",{style:{"margin-top":"16px"}},"\u5DF2 \u9009")],-1)),Se={style:{border:"1px solid #ccc",height:"390px",overflow:"auto"}},Te={class:"z-org-selected",style:{position:"relative"}},Ae=D(()=>l("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),Ne={class:"layui-elip f-user-name2"},Pe=Y({emits:["closeModal","register"],setup(k,{emit:M}){let f=-1,h="1",b=1,F=null,B=!1;const[x,{setModalProps:p,closeModal:C}]=ne(a=>_(this,null,function*(){if(f!=a.orgType&&(f=a.orgType,yield L(),i.value.splice(0,i.value.length)),b=a.selectMode,F=a.opener,t.value=a.orgs?a.orgs:[],h==="1")for(const e of r.value)for(const s of t.value){let d=!1;if(s.id==e.id){e.checked=!0,d=!0;break}d||(e.checked=!1)}else if(h==="2")for(const e of i.value)for(const s of t.value){let d=!1;if(s.id==e.id){e.checked=!0,d=!0;break}d||(e.checked=!1)}}));function z(){try{p({confirmLoading:!0}),C(),t.value&&t.value.length>0&&E.post({url:"/gen/org/rece",data:$(t.value)});const a={opener:F,orgs:$(t.value)};M("closeModal",a)}finally{p({confirmLoading:!1})}}function H(a){return _(this,null,function*(){if(h=a,a==="1")for(const e of r.value){let s=!1;for(const d of t.value)if(d.id==e.id){e.checked=!0,s=!0;break}s||(e.checked=!1)}else if(a==="2"){B||(yield V(),B=!0);for(const e of i.value){let s=!1;for(const d of t.value)if(d.id==e.id){e.checked=!0,s=!0;break}s||(e.checked=!1)}}})}const r=I([]),O=I("");function T(){return _(this,null,function*(){r.value=yield E.get({url:"/gen/org/main?type="+f,params:{name:O.value}});for(const a of r.value){let e=!1;for(const s of t.value)if(s.id==a.id){a.checked=!0,e=!0;break}e||(a.checked=!1)}})}function L(){return _(this,null,function*(){r.value=yield E.get({url:"/gen/org/rece?type="+f})})}function R(a){if(a.checked=!a.checked,b==1){t.value.length>0&&t.value.splice(0,1),t.value.push(a);for(let e=0;e<r.value.length;e++)r.value[e].id!==a.id&&(r.value[e].checked=!1)}else if(a.checked){let e=!1;for(const s of t.value)if(s.id===a.id){e=!0;break}e||t.value.push(a)}else for(let e=0;e<t.value.length;e++)if(t.value[e].id===a.id){t.value.splice(e,1);break}}const A=I([]);function V(){return _(this,null,function*(){A.value=yield E.get({url:"/gen/org/dept/tree"})})}const i=I([]);function W(a){return _(this,null,function*(){if(a.length>0){i.value=yield E.get({url:"/gen/org/main?type="+f,params:{deptid:a[0]}});for(const e of i.value)for(const s of t.value)if(s.id===e.id){e.checked=!0;break}}})}function J(a){if(a.checked=!a.checked,b==1){t.value.length>0&&t.value.splice(0,1),t.value.push(a);for(let e=0;e<i.value.length;e++)i.value[e].id!==a.id&&(i.value[e].checked=!1)}else if(a.checked){let e=!1;for(const s of t.value)if(s.id===a.id){e=!0;break}e||t.value.push(a)}else for(let e=0;e<t.value.length;e++)if(t.value[e].id===a.id){t.value.splice(e,1);break}}const t=I([]);function X(a){if(h==="1"){for(let e=0;e<r.value.length;e++)if(r.value[e].id===a.id){r.value[e].checked=!1;break}}else if(h==="2"){for(let e=0;e<i.value.length;e++)if(i.value[e].id===a.id){i.value[e].checked=!1;break}}for(let e=0;e<t.value.length;e++)if(t.value[e].id===a.id){t.value.splice(e,1);break}}return(a,e)=>{const s=N("a-input-search"),d=N("a-button");return v(),Z(n(ue),se(a.$attrs,{onRegister:n(x),title:"\u7EC4\u7EC7\u67B6\u6784\u9009\u62E9",width:"1000px",height:440,onOk:z}),{default:u(()=>[c(n(re),{dense:"",contentClass:"flex"},{default:u(()=>[c(n(G),{type:"card",class:"w-2/3 xl:w-2/3",onChange:H},{default:u(()=>[c(n(q),{key:"1"},{tab:u(()=>[l("span",null,[c(n(K)),fe])]),default:u(()=>[l("div",null,[c(s,{onSearch:T,value:O.value,"onUpdate:value":e[0]||(e[0]=o=>O.value=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u67E5\u8BE2",style:{width:"200px"}},null,8,["value"]),c(d,{type:"primary",style:{"margin-left":"10px"},onClick:T},{default:u(()=>[pe]),_:1})]),l("div",he,[l("ul",_e,[(v(!0),m(S,null,j(r.value,o=>(v(),m("li",{key:o.id,class:"f-user",onClick:y=>R(o)},[c(n(P),{checked:o.checked,"onUpdate:checked":y=>o.checked=y},null,8,["checked","onUpdate:checked"]),ge,l("span",ke,w(o.name),1),l("span",be,w(o.dept),1)],8,ve))),128))])])]),_:1}),c(n(q),{key:"2"},{tab:u(()=>[l("span",null,[c(n(Q)),ye])]),default:u(()=>[c(n(ee),null,{default:u(()=>[c(n(U),{span:12},{default:u(()=>[l("div",me,[c(n(ie),{title:"\u90E8\u95E8\u5217\u8868",toolbar:"",search:"",treeData:A.value,fieldNames:{key:"id",title:"name"},onSelect:W},null,8,["treeData"])])]),_:1}),c(n(U),{span:12},{default:u(()=>[l("div",xe,[l("ul",Ce,[(v(!0),m(S,null,j(i.value,o=>(v(),m("li",{key:o.id,class:"f-user",title:"444444444",onClick:y=>J(o)},[c(n(P),{checked:o.checked,"onUpdate:checked":y=>o.checked=y},null,8,["checked","onUpdate:checked"]),we,l("span",Ee,w(o.name),1),l("span",Fe,w(o.dept),1)],8,Ie))),128))])])]),_:1})]),_:1})]),_:1}),c(n(q),{key:"3"},{tab:u(()=>[l("span",null,[c(n(ae)),Be])]),default:u(()=>[qe]),_:1}),c(n(q),{key:"4"},{tab:u(()=>[l("span",null,[c(n(te)),De])]),default:u(()=>[Me]),_:1})]),_:1}),l("div",Oe,[je,l("div",Se,[l("ul",Te,[(v(!0),m(S,null,j(t.value,o=>(v(),m("li",{key:o.id,class:"f-user",style:{overflow:"hidden"}},[c(n(le),{onClick:y=>X(o)},null,8,["onClick"]),Ae,l("span",Ne,w(o.name),1)]))),128))])])])]),_:1})]),_:1},16,["onRegister"])}}});var Xe=de(Pe,[["__scopeId","data-v-4cf3c2af"]]);export{Xe as O};
