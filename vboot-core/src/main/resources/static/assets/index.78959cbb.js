var z=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var B=(d,s,t)=>s in d?z(d,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[s]=t,k=(d,s)=>{for(var t in s||(s={}))W.call(s,t)&&B(d,t,s[t]);if(b)for(var t of b(s))I.call(s,t)&&B(d,t,s[t]);return d},R=(d,s)=>q(d,G(s));var U=(d,s,t)=>new Promise((w,e)=>{var g=m=>{try{c(t.next(m))}catch(i){e(i)}},F=m=>{try{c(t.throw(m))}catch(i){e(i)}},c=m=>m.done?w(m.value):Promise.resolve(m.value).then(g,F);c((t=t.apply(d,s)).next())});import{P as J}from"./index.4a6d20cf.js";import{_ as L}from"./DeptTree.1d73a1ec.js";import{u as K,B as Q,a as X}from"./index.b3a760e0.js";import{u as Y}from"./index.7c24f3ba.js";import{ah as Z}from"./index.1f50be75.js";import{O as ee}from"./OrgModal.821e8224.js";import{h as te}from"./edit.6fd2a5d5.js";import{A as M,P as C,j as S,a0 as x,B as T,D as ae,w as n,a6 as u,u as a,bu as $,ae as h,J as j,a4 as O,ab as oe,t as P,r as ne,a1 as le,H as A}from"./vendor.8e08a5be.js";import{c as se,a as ue,d as de,e as ie}from"./list.20bccedc.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.2016176c.js";import"./useContentViewHeight.78015564.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              */import"./index.fa31d1d6.js";import"./useContextMenu.6d6ea44d.js";/* empty css               */const re=M({emits:["success","register"],setup(d,{emit:s}){const[t,{openModal:w}]=Y(),e=C({loadingText:"",url:"/sys/org/post",data:{},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}]}}),g=S(()=>{let o="";if(e.data.users&&e.data.users.length>0)for(const p of e.data.users)o+=p.name+"\uFF1B";return o}),F=S(()=>e.data.dept?e.data.dept.name:""),[c,{setDrawerProps:m,changeLoading:i,closeDrawer:f}]=K(o=>U(this,null,function*(){e.loadingText="\u52A0\u8F7D\u4E2D",i(!0),o.record.id?e.data=yield Z.get({url:e.url+"/one/"+o.record.id}):(e.data=o.record,e.data.dept&&e.data.dept.id===""&&(e.data.dept=null),e.data.avtag=!0),i(!1)}));function V(){w(!0,{opener:"users",orgType:8,selectMode:2,orgs:e.data.users?[...P(e.data.users)]:[]})}function v(){w(!0,{opener:"dept",orgType:2,selectMode:1,orgs:e.data.dept&&e.data.dept.id?[P(e.data.dept)]:[]})}function D(o){o.opener=="users"?e.data.users=o.orgs:o.opener=="dept"&&(e.data.dept=o.orgs[0])}return(o,p)=>{const E=x("vxe-input"),_=x("vxe-form-item"),H=x("vxe-switch"),y=x("vxe-textarea"),N=x("vxe-form");return T(),ae(oe,null,[n(a(Q),O(o.$attrs,{loadingText:a(e).loadingText,showFooter:"",title:"\u5C97\u4F4D\u4FE1\u606F",width:"70%",onOk:p[2]||(p[2]=l=>a(te)(o.$refs.xForm,a(e),s,a(m),a(i),a(f))),onRegister:a(c)}),{default:u(()=>[n(N,{"title-colon":"",ref:(l,r)=>{r.xForm=l},"title-align":"right","title-width":"100",data:a(e).data,rules:a(e).rules,loading:a(e).loading},{default:u(()=>[n(_,{title:"\u5C97\u4F4D\u540D\u79F0",field:"name","item-render":{},span:"12","title-width":"150"},{default:u(({data:l})=>[n(E,{modelValue:l.name,"onUpdate:modelValue":r=>l.name=r,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),n(_,{title:"\u6240\u5C5E\u90E8\u95E8",field:"dept","item-render":{},span:"12","title-width":"150"},{default:u(({data:l})=>[n(E,{modelValue:a(F),"onUpdate:modelValue":p[0]||(p[0]=r=>$(F)?F.value=r:null),"suffix-icon":"fa fa-search",readonly:"",onClick:v},null,8,["modelValue"])]),_:1}),n(_,{title:"\u662F\u5426\u53EF\u7528",field:"avtag","item-render":{},span:"12","title-width":"150"},{default:u(({data:l})=>[n(H,{modelValue:l.avtag,"onUpdate:modelValue":r=>l.avtag=r,"open-label":"\u662F","close-label":"\u5426"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),n(_,{title:"\u6392\u5E8F\u53F7",field:"ornum","item-render":{},span:"12","title-width":"150"},{default:u(({data:l})=>[n(E,{modelValue:l.ornum,"onUpdate:modelValue":r=>l.ornum=r,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),n(_,{title:"\u5458\u5DE5\u6210\u5458",field:"users","item-render":{},span:"24","title-width":"150"},{default:u(({data:l})=>[n(y,{modelValue:a(g),"onUpdate:modelValue":p[1]||(p[1]=r=>$(g)?g.value=r:null),placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",autosize:{minRows:4,maxRows:6},onClick:V,readonly:""},null,8,["modelValue"])]),_:1}),n(_,{title:"\u5C97\u4F4D\u5907\u6CE8",field:"notes","item-render":{},span:"24","title-width":"150"},{default:u(({data:l})=>[n(y,{modelValue:l.notes,"onUpdate:modelValue":r=>l.notes=r,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",autosize:{minRows:4,maxRows:6},clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),n(_,{title:"\u521B\u5EFA\u65F6\u95F4",field:"crtim","item-render":{},span:"12","title-width":"150"},{default:u(({data:l})=>[h(j(l.crtim),1)]),_:1}),n(_,{title:"\u66F4\u65B0\u65F6\u95F4",field:"uptim","item-render":{},span:"12","title-width":"150"},{default:u(({data:l})=>[h(j(l.uptim),1)]),_:1})]),_:1},8,["data","rules","loading"])]),_:1},16,["loadingText","onRegister"]),n(ee,{onRegister:a(t),onCloseModal:D},null,8,["onRegister"])],64)}}}),me={class:"w-3/4 xl:w-4/5 ztable"},pe=h("\u67E5 \u8BE2"),ce=h("\u65B0 \u589E"),fe=h("\u5220 \u9664"),_e=["onClick"],xe={name:"SysOrgPost",inheritAttrs:!1,customOptions:{}};function ge(d){const s=ne({}),t=C({name:"",deptid:"",deptname:""}),w=C(se("/sys/org/post",{},t,[{type:"checkbox",align:"center",width:42,fixed:"left"},{type:"seq",align:"center",width:50,fixed:"left"},{field:"name",title:"\u5C97\u4F4D\u540D\u79F0",width:300,fixed:"left",slots:{default:"name_default"}},{field:"notes",title:"\u5907\u6CE8"},{field:"crtim",title:"\u521B\u5EFA\u65F6\u95F4",width:140},{field:"uptim",title:"\u66F4\u65B0\u65F6\u95F4",width:140}])),e=()=>{s.value.commitProxy("query")};function g(i){i!=null?(t.deptid=i.id,t.deptname=i.name):(t.deptid="",t.deptname=""),e()}const[F,{openDrawer:c}]=X();function m(){e()}return(i,f)=>{const V=x("vxe-input"),v=x("vxe-button"),D=x("vxe-grid");return T(),le(a(J),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:u(()=>[n(L,{class:"w-1/4 xl:w-1/5",onSelect:g,style:{margin:"6px 0 6px 6px"}}),A("div",me,[n(D,O({ref:(o,p)=>{p.xGrid=o,s.value=o}},a(w)),{tbtns:u(()=>[n(V,{modelValue:a(t).name,"onUpdate:modelValue":f[0]||(f[0]=o=>a(t).name=o),placeholder:"\u8F93\u5165\u540D\u79F0\u67E5\u8BE2"},null,8,["modelValue"]),n(v,{onClick:e,status:"primary"},{default:u(()=>[pe]),_:1}),n(v,{onClick:f[1]||(f[1]=o=>a(ue)({dept:{id:a(t).deptid,name:a(t).deptname}},a(c)))},{default:u(()=>[ce]),_:1}),n(v,{onClick:f[2]||(f[2]=o=>a(de)(i.$refs.xGrid))},{default:u(()=>[fe]),_:1})]),name_default:u(({row:o})=>[A("span",{style:{cursor:"pointer",color:"#3e9ece"},onClick:p=>a(ie)({id:o.id},a(c))},j(o.name),9,_e)]),_:1},16)]),n(re,{onRegister:a(F),onSuccess:m},null,8,["onRegister"])]),_:1})}}const Ae=M(R(k({},xe),{setup:ge}));export{Ae as default};
