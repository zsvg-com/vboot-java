var E=(C,r,i)=>new Promise((d,x)=>{var o=n=>{try{m(i.next(n))}catch(f){x(f)}},w=n=>{try{m(i.throw(n))}catch(f){x(f)}},m=n=>n.done?d(n.value):Promise.resolve(n.value).then(o,w);m((i=i.apply(C,r)).next())});import{A as M,a$ as T,an as $,r as k,P as N,j as A,u as e,B as G,D as P,F as j,G as D,w as s,a5 as a,b0 as K,ad as u,J as c,aS as p,b1 as O,H as U,b2 as V,b3 as q,b4 as W,b5 as H,b6 as J,K as Q,b7 as X,aa as Y,b8 as Z,b9 as ee}from"./vendor.a4547d8e.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import{u as se,a as ae,L as y,_ as te,b as oe}from"./LoginFormTitle.c880d041.js";import{b as le,a as ne,f as re,h as ie}from"./index.49385d3b.js";const xe=M({setup(C){const r=Z,i=ee,d=T.Item,x=$.Password,{t:o}=le(),{notification:w,createErrorModal:m}=ie(),{prefixCls:n}=ne("login"),f=re(),{setLoginState:b,getLoginState:L}=se(),{getFormRules:B}=ae(),F=k(),S=k(!1),_=k(!1),g=N({account:"vben",password:"123456"}),{validForm:h}=oe(F),I=A(()=>e(L)===y.LOGIN);function R(){return E(this,null,function*(){const v=yield h();if(!!v)try{S.value=!0;const t=yield f.login({password:v.password,username:v.account,mode:"none"});t&&w.success({message:o("sys.login.loginSuccessTitle"),description:`${o("sys.login.loginSuccessDesc")}: ${t.realName}`,duration:3})}catch(t){m({title:o("sys.api.errorTip"),content:t.message||o("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${n}`)||document.body})}finally{S.value=!1}})}return(v,t)=>(G(),P(Y,null,[j(s(te,{class:"enter-x"},null,512),[[D,e(I)]]),j(s(e(T),{class:"p-4 enter-x",model:e(g),rules:e(B),ref:(l,z)=>{z.formRef=l,F.value=l},onKeypress:X(R,["enter"])},{default:a(()=>[s(e(d),{name:"account",class:"enter-x"},{default:a(()=>[s(e($),{size:"large",value:e(g).account,"onUpdate:value":t[0]||(t[0]=l=>e(g).account=l),placeholder:e(o)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(d),{name:"password",class:"enter-x"},{default:a(()=>[s(e(x),{size:"large",visibilityToggle:"",value:e(g).password,"onUpdate:value":t[1]||(t[1]=l=>e(g).password=l),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(i),{class:"enter-x"},{default:a(()=>[s(e(r),{span:12},{default:a(()=>[s(e(d),null,{default:a(()=>[s(e(K),{checked:_.value,"onUpdate:checked":t[2]||(t[2]=l=>_.value=l),size:"small"},{default:a(()=>[u(c(e(o)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(r),{span:12},{default:a(()=>[s(e(d),{style:{"text-align":"right"}},{default:a(()=>[s(e(p),{type:"link",size:"small",onClick:t[3]||(t[3]=l=>e(b)(e(y).RESET_PASSWORD))},{default:a(()=>[u(c(e(o)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(e(d),{class:"enter-x"},{default:a(()=>[s(e(p),{type:"primary",size:"large",block:"",onClick:R,loading:S.value},{default:a(()=>[u(c(e(o)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),s(e(i),{class:"enter-x"},{default:a(()=>[s(e(r),{md:8,xs:24},{default:a(()=>[s(e(p),{block:"",onClick:t[4]||(t[4]=l=>e(b)(e(y).MOBILE))},{default:a(()=>[u(c(e(o)("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:a(()=>[s(e(p),{block:"",onClick:t[5]||(t[5]=l=>e(b)(e(y).QR_CODE))},{default:a(()=>[u(c(e(o)("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:7,xs:24},{default:a(()=>[s(e(p),{block:"",onClick:t[6]||(t[6]=l=>e(b)(e(y).REGISTER))},{default:a(()=>[u(c(e(o)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1}),s(e(O),{class:"enter-x"},{default:a(()=>[u(c(e(o)("sys.login.otherSignIn")),1)]),_:1}),U("div",{class:Q(["flex justify-evenly enter-x",`${e(n)}-sign-in-way`])},[s(e(V)),s(e(q)),s(e(W)),s(e(H)),s(e(J))],2)]),_:1},8,["model","rules","onKeypress"]),[[D,e(I)]])],64))}});export{xe as default};
