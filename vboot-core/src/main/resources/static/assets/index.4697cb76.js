var ee=Object.defineProperty,te=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var P=(r,i,n)=>i in r?ee(r,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[i]=n,U=(r,i)=>{for(var n in i||(i={}))ae.call(i,n)&&P(r,n,i[n]);if(z)for(var n of z(i))oe.call(i,n)&&P(r,n,i[n]);return r},H=(r,i)=>te(r,ne(i));var E=(r,i,n)=>new Promise((w,h)=>{var d=x=>{try{b(n.next(x))}catch(m){h(m)}},u=x=>{try{b(n.throw(x))}catch(m){h(m)}},b=x=>x.done?w(x.value):Promise.resolve(x.value).then(d,u);b((n=n.apply(r,i)).next())});import{P as G}from"./index.0248b5d5.js";import{ah as S,_ as ie,k as se}from"./index.6733effe.js";import{A as q,r as D,P as N,bG as V,_ as le,a0 as k,B as F,D as T,H as o,w as e,u as t,a6 as s,J as j,$ as re,a1 as R,bq as ce,bV as A,bW as de,ap as K,b1 as L,ab as W,bX as ue,ba as pe,b9 as J,bZ as fe,a4 as X,ae as B,L as me,N as _e}from"./vendor.af2fe88b.js";import{a as he}from"./index.22b4830b.js";/* empty css               *//* empty css               *//* empty css              */import{a as xe,B as ge,u as ve}from"./index.df186f99.js";import{_ as ye}from"./index.ddcbdb3f.js";import{c as be,d as we}from"./list.fd3e66c9.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.4124f9cf.js";import"./useContentViewHeight.b4e0fa30.js";/* empty css               */import"./useContextMenu.0181a98a.js";/* empty css               */const ke={class:"bg-white m-4 mr-0 overflow-hidden zcate"},Ce={class:"flex px-2 py-1.5 items-center basic-tree-header"},Ee={class:"flex flex-1 justify-self-stretch items-center cursor-pointer"},$e=o("hr",null,null,-1),De=q({emits:["select"],setup(r,{emit:i}){const n=D({}),w=({column:v,row:c,triggerTreeNode:l})=>{l||(n.value.toggleTreeExpand(c),i("select",{id:c.id,name:c.name,type:c.type}))};function h(){i("select",null)}function d(){m()}D("");const u=N({filterName:"",tableData:[],originData:[],tableTreeConfig:{children:"children",rowKey:"id",indent:15,parentKey:"pid",iconOpen:"vxe-icon--arrow-bottom",iconClose:"vxe-icon--arrow-right"}}),b=()=>{const v=V.toValueString(u.filterName).trim();if(v){const c={children:"children"},l=["name"];u.tableData=V.searchTree(u.originData,p=>l.some(C=>V.toValueString(p[C]).indexOf(v)>-1),c),re(()=>{n.value.setAllTreeExpand(!0)})}else u.tableData=u.originData},x=V.debounce(function(){b()},500,{leading:!1,trailing:!0});function m(){return E(this,null,function*(){u.originData=yield S.get({url:"/wf/tem/main/tree"}),b()})}return le(()=>{m()}),(v,c)=>{const l=k("vxe-input"),p=k("vxe-button"),C=k("vxe-column"),$=k("vxe-table");return F(),T("div",ke,[o("div",Ce,[o("div",Ee,[e(l,{modelValue:t(u).filterName,"onUpdate:modelValue":c[0]||(c[0]=f=>t(u).filterName=f),placeholder:"\u641C\u7D22",style:{width:"120px"},type:"type",onKeyup:t(x)},null,8,["modelValue","onKeyup"]),e(p,{icon:"vxe-icon--refresh",title:"\u5237\u65B0",circle:"",onClick:d,style:{"margin-left":"4px","margin-right":"2px"}}),e(p,{icon:"vxe-icon--dot",title:"\u6839\u76EE\u5F55",circle:"",onClick:h,style:{"margin-left":"2px","margin-right":"2px"}}),e(p,{icon:"vxe-icon--caret-bottom",title:"\u5C55\u5F00",circle:"",onClick:c[1]||(c[1]=f=>v.$refs.xCate.setAllTreeExpand(!0)),style:{"margin-left":"2px","margin-right":"2px"}}),e(p,{icon:"vxe-icon--caret-top",title:"\u6298\u53E0",circle:"",onClick:c[2]||(c[2]=f=>v.$refs.xCate.clearTreeExpand()),style:{"margin-left":"2px","margin-right":"2px"}})])]),$e,e($,{ref:(f,g)=>{g.xCate=f,n.value=f},resizable:"","show-overflow":"","row-key":"",border:"none",size:"mini",height:"auto","highlight-current-row":"","highlight-hover-row":"","show-header":!1,onCellClick:w,"row-config":{height:26},"tree-config":t(u).tableTreeConfig,data:t(u).tableData},{default:s(()=>[e(C,{field:"name",title:"Name","tree-node":""},{default:s(({row:f})=>[o("span",null,j(f.name),1)]),_:1})]),_:1},8,["tree-config","data"])])}}});const O=r=>(me("data-v-717501aa"),r=r(),_e(),r),Fe=B("\u5FEB\u6377\u641C\u7D22"),Be=B("\u67E5\u8BE2"),je={style:{"margin-top":"5px",overflow:"auto",height:"353px",border:"1px solid #ccc"}},Me={class:"z-org-search",id:"zOrgSearch",style:{padding:"2px"}},Se=["onClick"],Te=O(()=>o("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),Ie={class:"layui-elip f-user-name"},Ve={class:"layui-elip f-user-dept"},qe=B("\u6D41\u7A0B\u5206\u7C7B"),Ne={style:{height:"390px",border:"1px solid #ccc"}},Ae={style:{border:"1px solid #ccc",height:"390px","margin-left":"5px",overflow:"auto"}},Oe={class:"z-org-tree"},ze=["onClick"],Pe=O(()=>o("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),Ue={class:"layui-elip f-user-name"},He={class:"layui-elip f-user-dept"},Ge=B("\u6211\u7684\u6536\u85CF"),Re=O(()=>o("div",{style:{height:"390px"}}," \u8FD9\u4E2A\u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1 ",-1)),Ke=q({emits:["closeModal","register"],setup(r,{emit:i}){let n=null,w=!1,h={};const[d,{setModalProps:u,closeModal:b}]=xe(a=>E(this,null,function*(){yield l(),n=a.opener}));function x(){try{u({confirmLoading:!0}),b();const a={opener:n,flow:{id:h.id,name:h.name}};i("closeModal",a)}finally{u({confirmLoading:!1})}}const m=D([]),v=D("");function c(){return E(this,null,function*(){m.value=yield S.get({url:"/wf/tem/main/list",params:{name:v.value}})})}function l(){return E(this,null,function*(){m.value=yield S.get({url:"/wf/tem/main/list",params:{name:"all"}})})}function p(a){a.checked=!a.checked,h.id=a.id,h.name=a.name;for(let y=0;y<m.value.length;y++)m.value[y].id!==a.id&&(m.value[y].checked=!1)}const C=D([]);function $(){return E(this,null,function*(){C.value=yield S.get({url:"/wf/tem/cate/tree"})})}const f=D([]);function g(a){return E(this,null,function*(){a.length>0&&(f.value=yield S.get({url:"/wf/tem/main/list",params:{cateid:a[0]}}))})}function I(a){a.checked=!a.checked,h.id=a.id,h.name=a.name;for(let y=0;y<f.value.length;y++)f.value[y].id!==a.id&&(f.value[y].checked=!1)}function Z(a){return E(this,null,function*(){a==="2"&&(w||(yield $(),w=!0))})}return(a,y)=>{const Q=k("a-input-search"),Y=k("a-button");return F(),R(t(ge),X(a.$attrs,{onRegister:t(d),title:"\u6D41\u7A0B\u9009\u62E9",width:"700px",height:440,onOk:x}),{default:s(()=>[e(t(G),{dense:"",contentClass:"flex"},{default:s(()=>[e(t(ce),{type:"card",style:{width:"100%"},onChange:Z},{default:s(()=>[e(t(A),{key:"1"},{tab:s(()=>[o("span",null,[e(t(de)),Fe])]),default:s(()=>[o("div",null,[e(Q,{onSearch:c,value:v.value,"onUpdate:value":y[0]||(y[0]=_=>v.value=_),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u67E5\u8BE2",style:{width:"200px"}},null,8,["value"]),e(Y,{type:"primary",style:{"margin-left":"10px"},onClick:c},{default:s(()=>[Be]),_:1})]),o("div",je,[o("ul",Me,[(F(!0),T(W,null,K(m.value,_=>(F(),T("li",{key:_.id,class:"f-user",onClick:M=>p(_)},[e(t(L),{checked:_.checked,"onUpdate:checked":M=>_.checked=M},null,8,["checked","onUpdate:checked"]),Te,o("span",Ie,j(_.name),1),o("span",Ve,j(_.dept),1)],8,Se))),128))])])]),_:1}),e(t(A),{key:"2"},{tab:s(()=>[o("span",null,[e(t(ue)),qe])]),default:s(()=>[e(t(pe),null,{default:s(()=>[e(t(J),{span:12},{default:s(()=>[o("div",Ne,[e(t(ye),{title:"#",toolbar:"",search:"",treeData:C.value,fieldNames:{key:"id",title:"name"},onSelect:g},null,8,["treeData"])])]),_:1}),e(t(J),{span:12},{default:s(()=>[o("div",Ae,[o("ul",Oe,[(F(!0),T(W,null,K(f.value,_=>(F(),T("li",{key:_.id,class:"f-user",title:"444444444",onClick:M=>I(_)},[e(t(L),{checked:_.checked,"onUpdate:checked":M=>_.checked=M},null,8,["checked","onUpdate:checked"]),Pe,o("span",Ue,j(_.name),1),o("span",He,j(_.dept),1)],8,ze))),128))])])]),_:1})]),_:1})]),_:1}),e(t(A),{key:"3"},{tab:s(()=>[o("span",null,[e(t(fe)),Ge])]),default:s(()=>[Re]),_:1})]),_:1})]),_:1})]),_:1},16,["onRegister"])}}});var Le=ie(Ke,[["__scopeId","data-v-717501aa"]]);const We={class:"w-3/4 xl:w-4/5 ztable"},Je=B("\u67E5 \u8BE2"),Xe=B("\u65B0 \u589E"),Ze=B("\u5220 \u9664"),Qe=["onClick"],Ye={name:"WfInsMain",inheritAttrs:!1,customOptions:{}};function et(r){const[i,{openModal:n}]=ve(),w=se(),h=D({}),d=N({name:"",temid:"",temna:"",temty:""}),u=N(be("/wf/ins/main",{},d,[{type:"checkbox",align:"center",width:42,fixed:"left"},{type:"seq",align:"center",width:50,fixed:"left"},{field:"name",title:"\u6D41\u7A0B\u4E3B\u9898",width:300,fixed:"left",slots:{default:"name_default"}},{field:"notes",title:"\u5907\u6CE8"},{field:"crtim",title:"\u521B\u5EFA\u65F6\u95F4",width:140},{field:"uptim",title:"\u66F4\u65B0\u65F6\u95F4",width:140}])),b=()=>{h.value.commitProxy("query")};function x(l){l!=null?(d.temid=l.id,d.temna=l.name,d.temty=l.type):(d.temid="",d.temna="",d.temty=""),b()}function m(){d.temty=="main"?w("/wf/ins/main/new?temid="+d.temid):n(!0,{opener:"parent",orgs:[]})}function v(l){l.flow&&l.flow.id&&w("/wf/ins/main/new?temid="+l.flow.id)}function c(l){w("/wf/ins/main/"+l)}return he(),(l,p)=>{const C=k("vxe-input"),$=k("vxe-button"),f=k("vxe-grid");return F(),R(t(G),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:s(()=>[e(De,{class:"w-1/4 xl:w-1/5",onSelect:x,style:{margin:"6px 0 6px 6px"}}),o("div",We,[e(f,X({ref:(g,I)=>{I.xGrid=g,h.value=g}},t(u)),{tbtns:s(()=>[e(C,{modelValue:t(d).name,"onUpdate:modelValue":p[0]||(p[0]=g=>t(d).name=g),placeholder:"\u8F93\u5165\u540D\u79F0\u67E5\u8BE2"},null,8,["modelValue"]),e($,{onClick:b,status:"primary"},{default:s(()=>[Je]),_:1}),e($,{onClick:p[1]||(p[1]=g=>m())},{default:s(()=>[Xe]),_:1}),e($,{onClick:p[2]||(p[2]=g=>t(we)(l.$refs.xGrid))},{default:s(()=>[Ze]),_:1})]),name_default:s(({row:g})=>[o("span",{style:{cursor:"pointer",color:"#3e9ece"},onClick:I=>c(g.id)},j(g.name),9,Qe)]),_:1},16)]),e(Le,{onRegister:t(i),onCloseModal:v},null,8,["onRegister"])]),_:1})}}const vt=q(H(U({},Ye),{setup:et}));export{vt as default};
