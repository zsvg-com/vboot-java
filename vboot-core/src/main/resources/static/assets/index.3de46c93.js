var U=Object.defineProperty,P=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var C=(u,a,e)=>a in u?U(u,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[a]=e,D=(u,a)=>{for(var e in a||(a={}))G.call(a,e)&&C(u,e,a[e]);if(B)for(var e of B(a))H.call(a,e)&&C(u,e,a[e]);return u},V=(u,a)=>P(u,S(a));var A=(u,a,e)=>new Promise((E,_)=>{var p=r=>{try{s(e.next(r))}catch(c){_(c)}},F=r=>{try{s(e.throw(r))}catch(c){_(c)}},s=r=>r.done?E(r.value):Promise.resolve(r.value).then(p,F);s((e=e.apply(u,a)).next())});import{P as R}from"./index.4a6d20cf.js";import{u as q,B as N,a as O}from"./index.b3a760e0.js";import{ah as z,k as W}from"./index.1f50be75.js";import{h as I}from"./edit.6fd2a5d5.js";import{A as k,P as v,a0 as g,B as j,a1 as y,a6 as l,w as i,H as x,J as h,u as n,a4 as $,r as J,ae as b}from"./vendor.8e08a5be.js";import{c as L,a as M,d as K,e as Q}from"./list.20bccedc.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.2016176c.js";import"./useContentViewHeight.78015564.js";/* empty css               */const X=k({emits:["success","register"],setup(u,{emit:a}){const e=v({loadingText:"",url:"/bi/table/main",data:{},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}]}}),[E,{setDrawerProps:_,changeLoading:p,closeDrawer:F}]=q(s=>A(this,null,function*(){e.loadingText="\u52A0\u8F7D\u4E2D",p(!0),s.record.id?(e.data=yield z.get({url:e.url+"/one/"+s.record.id}),console.log(e.data),console.log(e.rules)):(e.data=s.record,e.data.avtag=!0),p(!1)}));return(s,r)=>{const c=g("vxe-input"),d=g("vxe-form-item"),f=g("vxe-form");return j(),y(n(N),$(s.$attrs,{loadingText:n(e).loadingText,showFooter:"",title:"\u6570\u636E\u5E93\u8868\u4FE1\u606F",width:"70%",onOk:r[0]||(r[0]=t=>n(I)(s.$refs.xForm,n(e),a,n(_),n(p),n(F))),onRegister:n(E)}),{default:l(()=>[i(f,{"title-colon":"",ref:(t,o)=>{o.xForm=t},"title-align":"right","title-width":"100",data:n(e).data,rules:n(e).rules},{default:l(()=>[i(d,{title:"\u8868\u540D",field:"name","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[i(c,{modelValue:t.name,"onUpdate:modelValue":o=>t.name=o,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(d,{title:"\u6CE8\u91CA",field:"comet","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[i(c,{modelValue:t.comet,"onUpdate:modelValue":o=>t.comet=o,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(d,{title:"\u5907\u6CE8",field:"notes","item-render":{},span:"24","title-width":"150"},{default:l(({data:t})=>[i(c,{modelValue:t.notes,"onUpdate:modelValue":o=>t.notes=o,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(d,{title:"\u521B\u5EFA\u65F6\u95F4",field:"crtim","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[x("span",null,h(t.crtim),1)]),_:1}),i(d,{title:"\u521B\u5EFA\u4EBA",field:"upman","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>{var o;return[x("span",null,h((o=t.crman)==null?void 0:o.name),1)]}),_:1}),i(d,{title:"\u4FEE\u6539\u65F6\u95F4",field:"crtim","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[x("span",null,h(t.uptim),1)]),_:1}),i(d,{title:"\u4FEE\u6539\u4EBA",field:"upman","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>{var o;return[x("span",null,h((o=t.upman)==null?void 0:o.name),1)]}),_:1})]),_:1},8,["data","rules"])]),_:1},16,["loadingText","onRegister"])}}}),Y=b("\u67E5 \u8BE2"),Z=b("\u65B0 \u589E"),ee=b("\u5220 \u9664"),te=["onClick"],ne=["onClick"],ae={name:"BiTableMain",inheritAttrs:!1};function oe(u){const a=J({}),e=v({name:""}),E=W(),_=v(L("/bi/table/main",{},e,[{type:"checkbox",align:"center",width:42,fixed:"left"},{type:"seq",align:"center",width:50,fixed:"left"},{field:"name",title:"\u8868\u540D",width:300,fixed:"left",slots:{default:"name_default"}},{field:"comet",title:"\u6CE8\u91CA"},{field:"notes",title:"\u5176\u4ED6\u5907\u6CE8"},{field:"crtim",title:"\u521B\u5EFA\u65F6\u95F4",width:150},{field:"crman",title:"\u521B\u5EFA\u4EBA",width:65},{field:"uptim",title:"\u4FEE\u6539\u65F6\u95F4",width:150},{field:"upman",title:"\u4FEE\u6539\u4EBA",width:65},{title:"\u64CD\u4F5C",width:60,align:"center",slots:{default:"operate"}}])),p=()=>{a.value.commitProxy("query")},F=d=>{console.log(d),E("/bi/field/main/"+d)},[s,{openDrawer:r}]=O();function c(){p()}return(d,f)=>{const t=g("vxe-input"),o=g("vxe-button"),T=g("vxe-grid");return j(),y(n(R),{class:"ztable",contentFullHeight:""},{default:l(()=>[i(T,$({ref:(m,w)=>{w.xGrid=m,a.value=m}},n(_)),{tbtns:l(()=>[i(t,{modelValue:n(e).name,"onUpdate:modelValue":f[0]||(f[0]=m=>n(e).name=m),placeholder:"\u8F93\u5165\u540D\u79F0\u67E5\u8BE2"},null,8,["modelValue"]),i(o,{onClick:p,status:"primary"},{default:l(()=>[Y]),_:1}),i(o,{onClick:f[1]||(f[1]=m=>n(M)({},n(r)))},{default:l(()=>[Z]),_:1}),i(o,{onClick:f[2]||(f[2]=m=>n(K)(d.$refs.xGrid))},{default:l(()=>[ee]),_:1})]),name_default:l(({row:m})=>[x("span",{style:{cursor:"pointer",color:"#3e9ece"},onClick:w=>n(Q)({id:m.id},n(r))},h(m.name),9,te)]),operate:l(({row:m})=>[x("span",{style:{cursor:"pointer",color:"#3e9ece"},onClick:w=>F(m.id)},"\u914D\u7F6E",8,ne)]),_:1},16),i(X,{onRegister:n(s),onSuccess:c},null,8,["onRegister"])]),_:1})}}const xe=k(V(D({},ae),{setup:oe}));export{xe as default};
