var D=(c,g,a)=>new Promise((d,u)=>{var e=n=>{try{r(a.next(n))}catch(l){u(l)}},s=n=>{try{r(a.throw(n))}catch(l){u(l)}},r=n=>n.done?d(n.value):Promise.resolve(n.value).then(e,s);r((a=a.apply(c,g)).next())});import{ah as T}from"./index.49385d3b.js";import{A as V,r as C,P as B,bB as m,$ as N,_ as P,a0 as f,B as S,a1 as $,a5 as h,w,bt as K,u as b,H as y,J as z}from"./vendor.a4547d8e.js";const A={class:"my-dropdown3",style:{"padding-right":"3px"}},M={style:{border:"1px solid #DADCE0"},class:"zmenu"},U=V({props:{pname:String},emits:["select"],setup(c,{emit:g}){const a=c,d=C({}),u=({row:o,triggerTreeNode:i})=>{i||(s.value.hidePanel(),g("select",{id:o.id,name:o.name}))},e=B({filterName:"",tableData:[],originData:[],tableTreeConfig:{children:"children",rowKey:"id",parentKey:"pid",iconOpen:"vxe-icon--arrow-bottom",iconClose:"vxe-icon--arrow-right"}}),s=C({}),r=()=>{s.value.togglePanel()},n=m.debounce(function(){l()},500,{leading:!1,trailing:!0}),l=()=>{const o=m.toValueString(a.pname).trim();if(o){const i={children:"children"},v=["name"];e.tableData=m.searchTree(e.originData,p=>v.some(x=>m.toValueString(p[x]).indexOf(o)>-1),i),N(()=>{d.value.setAllTreeExpand(!0)})}else e.tableData=e.originData};function k(){return D(this,null,function*(){e.originData=yield T.get({url:"/sys/auth/menu/tree?type=DM"}),l()})}return P(()=>{k()}),(o,i)=>{const v=f("vxe-input"),p=f("vxe-column"),x=f("vxe-table"),E=f("vxe-pulldown");return S(),$(E,{ref:(t,_)=>{_.xDown3=t,s.value=t},"destroy-on-close":"",style:{width:"100%"}},{default:h(()=>[w(v,{modelValue:c.pname,"onUpdate:modelValue":i[0]||(i[0]=t=>K(pname)?pname.value=t:null),placeholder:"\u53EF\u641C\u7D22\u7684\u4E0B\u62C9\u6846","suffix-icon":"vxe-icon--caret-bottom",onClick:r,onKeyup:b(n)},null,8,["modelValue","onKeyup"])]),dropdown:h(()=>[y("div",A,[y("div",M,[w(x,{ref:(t,_)=>{_.xTree=t,d.value=t},resizable:"","show-overflow":"","row-key":"",border:"none",size:"mini",height:"300px","highlight-current-row":"","highlight-hover-row":"","show-header":!1,onCellClick:u,"row-config":{height:120},"tree-config":b(e).tableTreeConfig,data:b(e).tableData},{default:h(()=>[w(p,{field:"name",title:"Name","tree-node":""},{default:h(({row:t})=>[y("span",null,z(t.name),1)]),_:1})]),_:1},8,["tree-config","data"])])])]),_:1},512)}}});export{U as default};
