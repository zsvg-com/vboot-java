var T=Object.defineProperty,P=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var D=(p,d,i)=>d in p?T(p,d,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[d]=i,y=(p,d)=>{for(var i in d||(d={}))G.call(d,i)&&D(p,i,d[i]);if(j)for(var i of j(d))N.call(d,i)&&D(p,i,d[i]);return p},C=(p,d)=>P(p,H(d));var A=(p,d,i)=>new Promise((s,o)=>{var g=c=>{try{x(i.next(c))}catch(_){o(_)}},h=c=>{try{x(i.throw(c))}catch(_){o(_)}},x=c=>c.done?s(c.value):Promise.resolve(c.value).then(g,h);x((i=i.apply(p,d)).next())});import{A as k,P as b,j as q,a0 as w,B as S,D as z,w as e,a6 as n,u as a,bu as W,ae as F,J as B,a4 as R,ab as I,t as J,r as $,a1 as L,H as U,F as K,G as Q}from"./vendor.8e08a5be.js";import{P as X}from"./index.4a6d20cf.js";import{_ as Y}from"./DeptTree.1d73a1ec.js";import{u as Z,B as ee,a as te}from"./index.b3a760e0.js";import{u as le}from"./index.7c24f3ba.js";import{ah as ae}from"./index.1f50be75.js";import{O as oe}from"./OrgModal.821e8224.js";import{h as ue}from"./edit.6fd2a5d5.js";import{c as ne,a as de,d as ie,e as se}from"./list.20bccedc.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.2016176c.js";import"./useContentViewHeight.78015564.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              */import"./index.fa31d1d6.js";import"./useContextMenu.6d6ea44d.js";/* empty css               */const re=k({emits:["success","register"],setup(p,{emit:d}){const[i,{openModal:s}]=le(),o=b({loadingText:"",url:"/sys/org/user",data:{},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}]}}),[g,{setDrawerProps:h,changeLoading:x,closeDrawer:c}]=Z(m=>A(this,null,function*(){o.loadingText="\u52A0\u8F7D\u4E2D",x(!0),m.record.id?o.data=yield ae.get({url:o.url+"/one/"+m.record.id}):(o.data=m.record,o.data.dept&&o.data.dept.id===""&&(o.data.dept=null),o.data.avtag=!0),x(!1)})),_=q(()=>o.data.dept?o.data.dept.name:"");function v(){s(!0,{opener:"dept",orgType:2,selectMode:1,orgs:o.data.dept&&o.data.dept.id?[J(o.data.dept)]:[]})}function r(m){m.opener=="dept"&&(o.data.dept=m.orgs[0])}return(m,V)=>{const f=w("vxe-input"),l=w("vxe-form-item"),E=w("vxe-switch"),M=w("vxe-textarea"),O=w("vxe-form");return S(),z(I,null,[e(a(ee),R(m.$attrs,{loadingText:a(o).loadingText,showFooter:"",title:"\u7528\u6237\u4FE1\u606F",width:"70%",onOk:V[1]||(V[1]=t=>a(ue)(m.$refs.xForm,a(o),d,a(h),a(x),a(c))),onRegister:a(g)}),{default:n(()=>[e(O,{"title-colon":"",ref:(t,u)=>{u.xForm=t},"title-align":"right","title-width":"100",data:a(o).data,rules:a(o).rules},{default:n(()=>[e(l,{title:"\u59D3\u540D",field:"name","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(f,{modelValue:t.name,"onUpdate:modelValue":u=>t.name=u,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u6635\u79F0",field:"ninam","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(f,{modelValue:t.ninam,"onUpdate:modelValue":u=>t.ninam=u,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u767B\u5F55\u540D",field:"usnam","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(f,{modelValue:t.usnam,"onUpdate:modelValue":u=>t.usnam=u,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u5BC6\u7801",field:"pacod","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(f,{modelValue:t.pacod,"onUpdate:modelValue":u=>t.pacod=u,type:"password",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u6240\u5C5E\u90E8\u95E8",field:"dept","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(f,{modelValue:a(_),"onUpdate:modelValue":V[0]||(V[0]=u=>W(_)?_.value=u:null),"suffix-icon":"vxe-icon--search",readonly:"",onClick:v},null,8,["modelValue"])]),_:1}),e(l,{title:"\u804C\u52A1",field:"job","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(f,{modelValue:t.job,"onUpdate:modelValue":u=>t.job=u,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u624B\u673A\u53F7",field:"monum","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(f,{modelValue:t.monum,"onUpdate:modelValue":u=>t.monum=u,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u90AE\u7BB1",field:"email","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(f,{modelValue:t.email,"onUpdate:modelValue":u=>t.email=u,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u662F\u5426\u53EF\u7528",field:"avtag","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(E,{modelValue:t.avtag,"onUpdate:modelValue":u=>t.avtag=u,"open-label":"\u662F","close-label":"\u5426"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u6392\u5E8F\u53F7",field:"ornum","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[e(f,{modelValue:t.ornum,"onUpdate:modelValue":u=>t.ornum=u,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u7528\u6237\u5907\u6CE8",field:"notes","item-render":{},span:"24","title-width":"150"},{default:n(({data:t})=>[e(M,{modelValue:t.notes,"onUpdate:modelValue":u=>t.notes=u,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",autosize:{minRows:4,maxRows:6},clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(l,{title:"\u521B\u5EFA\u65F6\u95F4",field:"crtim","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[F(B(t.crtim),1)]),_:1}),e(l,{title:"\u66F4\u65B0\u65F6\u95F4",field:"uptim","item-render":{},span:"12","title-width":"150"},{default:n(({data:t})=>[F(B(t.uptim),1)]),_:1})]),_:1},8,["data","rules"])]),_:1},16,["loadingText","onRegister"]),e(oe,{onRegister:a(i),onCloseModal:r},null,8,["onRegister"])],64)}}}),me={class:"w-3/4 xl:w-4/5 ztable"},pe={style:{"margin-top":"8px",padding:"0"}},ce=F(" \u624B\u673A\u53F7\uFF1A"),fe=F(" \u5DE5\u53F7\uFF1A"),xe=F(" \u6635\u79F0\uFF1A"),_e=F("\u67E5 \u8BE2"),Ve=F("\u65B0 \u589E"),Fe=F("\u5220 \u9664"),ge=F("\u66F4\u591A\u6761\u4EF6"),we=["onClick"],ve={name:"SysOrgUser",inheritAttrs:!1,customOptions:{}};function he(p){const d=$(!1),i=$({}),s=b({name:"",deptid:"",deptname:""}),o=b(ne("/sys/org/user",{},s,[{type:"checkbox",align:"center",width:42,fixed:"left"},{type:"seq",align:"center",width:50,fixed:"left"},{field:"name",title:"\u7528\u6237\u540D\u79F0",width:300,fixed:"left",slots:{default:"name_default"}},{field:"notes",title:"\u5907\u6CE8"},{field:"crtim",title:"\u521B\u5EFA\u65F6\u95F4",width:140},{field:"uptim",title:"\u66F4\u65B0\u65F6\u95F4",width:140}])),g=()=>{i.value.commitProxy("query")};function h(v){v!=null?(s.deptid=v.id,s.deptname=v.name):(s.deptid="",s.deptname=""),g()}const[x,{openDrawer:c}]=te();function _(){g()}return(v,r)=>{const m=w("vxe-input"),V=w("vxe-button"),f=w("vxe-grid");return S(),L(a(X),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:n(()=>[e(Y,{class:"w-1/4 xl:w-1/5",onSelect:h,style:{margin:"6px 0 6px 6px"}}),U("div",me,[e(f,R({ref:(l,E)=>{E.xGrid=l,i.value=l}},a(o)),{form:n(()=>[K(U("div",pe,[ce,e(m,{modelValue:a(s).monum,"onUpdate:modelValue":r[0]||(r[0]=l=>a(s).monum=l),placeholder:"\u8F93\u5165\u624B\u673A\u53F7\u67E5\u8BE2",style:{margin:"3px 5px"}},null,8,["modelValue"]),fe,e(m,{modelValue:a(s).usnam,"onUpdate:modelValue":r[1]||(r[1]=l=>a(s).usnam=l),placeholder:"\u8F93\u5165\u5DE5\u53F7\u67E5\u8BE2",style:{margin:"3px 5px"}},null,8,["modelValue"]),xe,e(m,{modelValue:a(s).ninam,"onUpdate:modelValue":r[2]||(r[2]=l=>a(s).ninam=l),placeholder:"\u8F93\u5165\u6635\u79F0\u67E5\u8BE2",style:{margin:"3px 5px"}},null,8,["modelValue"])],512),[[Q,d.value]])]),tbtns:n(()=>[e(m,{modelValue:a(s).name,"onUpdate:modelValue":r[3]||(r[3]=l=>a(s).name=l),type:"search",placeholder:"\u8F93\u5165\u540D\u79F0\u67E5\u8BE2",onSearch:g},null,8,["modelValue"]),e(V,{onClick:g,status:"primary"},{default:n(()=>[_e]),_:1}),e(V,{onClick:r[4]||(r[4]=l=>a(de)({dept:{id:a(s).deptid,name:a(s).deptname}},a(c)))},{default:n(()=>[Ve]),_:1}),e(V,{onClick:r[5]||(r[5]=l=>a(ie)(v.$refs.xGrid))},{default:n(()=>[Fe]),_:1}),e(V,{onClick:r[6]||(r[6]=l=>d.value=!d.value)},{default:n(()=>[ge]),_:1})]),name_default:n(({row:l})=>[U("span",{style:{cursor:"pointer",color:"#3e9ece"},onClick:E=>a(se)({id:l.id},a(c))},B(l.name),9,we)]),_:1},16)]),e(re,{onRegister:a(x),onSuccess:_},null,8,["onRegister"])]),_:1})}}const ze=k(C(y({},ve),{setup:he}));export{ze as default};
