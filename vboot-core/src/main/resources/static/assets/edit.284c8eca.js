var M=Object.defineProperty,P=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var A=(u,n,e)=>n in u?M(u,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[n]=e,k=(u,n)=>{for(var e in n||(n={}))W.call(n,e)&&A(u,e,n[e]);if(E)for(var e of E(n))q.call(n,e)&&A(u,e,n[e]);return u},D=(u,n)=>P(u,R(n));var m=(u,n,e)=>new Promise((h,_)=>{var b=d=>{try{c(e.next(d))}catch(p){_(p)}},y=d=>{try{c(e.throw(d))}catch(p){_(p)}},c=d=>d.done?h(d.value):Promise.resolve(d.value).then(b,y);c((e=e.apply(u,n)).next())});import{N as L,B as U}from"./store.79fec13d.js";import{P as H}from"./index.0248b5d5.js";import{A as X,bc as J,r as C,_ as O,P as $,a0 as B,B as G,a1 as I,a6 as t,H as s,w as i,u as a,bV as g,ba as T,b9 as V,J as K,bq as Q,ae as f}from"./vendor.af2fe88b.js";/* empty css               *//* empty css               */import{a4 as Y,ah as x}from"./index.6733effe.js";import"./index.esm.eaa71f61.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.4124f9cf.js";import"./useContentViewHeight.b4e0fa30.js";const Z={style:{padding:"10px","background-color":"white",width:"100%"}},ee=s("span",null,"\u57FA\u672C\u4FE1\u606F",-1),te={style:{"border-top":"1px solid #cccccc","border-right":"1px solid #cccccc"}},ae=s("div",{class:"zitem-title"},[s("span",{style:{color:"red"}},"* "),f("\u6D41\u7A0B\u4E3B\u9898")],-1),se={class:"zitem-input"},ne=s("div",{class:"zitem-title"},"\u6240\u5C5E\u6A21\u677F",-1),oe={class:"zitem-input"},ie={class:"zitem"},ue=s("div",{class:"zitem-title"},[s("span",{style:{color:"red"}},"* "),f("\u6D41\u7A0B\u5907\u6CE8")],-1),de={class:"zitem-input"},le=s("span",null,"\u5BA1\u6279\u5185\u5BB9",-1),re=f(" \u5F85\u5F00\u53D1 "),ce=s("span",null,"\u6D41\u7A0B\u5904\u7406",-1),me=s("div",{id:"modeler-container",style:{height:"100%",width:"100%",cursor:"pointer"}},null,-1),_e=s("span",null,"\u6743\u9650\u4FE1\u606F",-1),pe=f(" \u8FD9\u4E2A\u4E5F\u5F85\u5F00\u53D1 "),fe=f("\u63D0 \u4EA4"),xe={name:"WfTemMainEdit",inheritAttrs:!1,customOptions:{}};function he(u,{emit:n}){var j,z;const e=J(),h=C((j=e.params)==null?void 0:j.id).value,_=C((z=e.query)==null?void 0:z.temid).value;function b(){return m(this,null,function*(){if(_){const r=yield x.get({url:"/wf/tem/main/one/"+_});o.data.temna=r.name,o.data.temid=r.id}})}function y(){return m(this,null,function*(){o.data=yield x.get({url:"/wf/ins/main/one/"+h})})}let c=!1;function d(r){return m(this,null,function*(){r==3&&!c&&setTimeout(()=>m(this,null,function*(){const l=yield x.get({url:"/wf/tem/main/one/"+o.data.temid}),F=new L({container:"#modeler-container"});try{const{warnings:w}=yield F.importXML(l.xml);console.log("rendered")}catch(w){console.log("error rendering",w)}c=!0}),150)})}O(()=>{h=="new"?b():y()}),C({});const{closeCurrent:p}=Y(),o=$({url:"/wf/ins/main",data:{}});function N(){return m(this,null,function*(){const r=yield U.getXML();o.data.xml=r.xml,o.data.id?yield x.put({url:o.url,data:o.data}):yield x.post({url:o.url,data:o.data}),yield p()})}return(r,l)=>{const F=B("vxe-input"),w=B("vxe-textarea"),S=B("vxe-button");return G(),I(a(H),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:t(()=>[s("div",Z,[i(a(Q),{type:"card",onChange:d},{rightExtra:t(()=>[i(S,{onClick:l[2]||(l[2]=v=>N()),status:"primary"},{default:t(()=>[fe]),_:1})]),default:t(()=>[i(a(g),{key:"1",class:"vxe-row"},{tab:t(()=>[ee]),default:t(()=>[s("div",te,[i(a(T),null,{default:t(()=>[i(a(V),{span:12,class:"zitem"},{default:t(()=>[ae,s("div",se,[i(F,{modelValue:a(o).data.name,"onUpdate:modelValue":l[0]||(l[0]=v=>a(o).data.name=v)},null,8,["modelValue"])])]),_:1}),i(a(V),{span:12,class:"zitem"},{default:t(()=>[ne,s("div",oe,K(a(o).data.temna),1)]),_:1})]),_:1}),i(a(T),null,{default:t(()=>[i(a(V),{span:24},{default:t(()=>[s("div",ie,[ue,s("div",de,[i(w,{modelValue:a(o).data.notes,"onUpdate:modelValue":l[1]||(l[1]=v=>a(o).data.notes=v),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",autosize:{minRows:4,maxRows:6}},null,8,["modelValue"])])])]),_:1})]),_:1})])]),_:1}),i(a(g),{key:"2",class:"vxe-row"},{tab:t(()=>[le]),default:t(()=>[re]),_:1}),i(a(g),{key:"3",class:"vxe-row"},{tab:t(()=>[ce]),default:t(()=>[i(a(H),{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:t(()=>[me]),_:1})]),_:1}),i(a(g),{key:"4",class:"vxe-row"},{tab:t(()=>[_e]),default:t(()=>[pe]),_:1})]),_:1})])]),_:1})}}const Ae=X(D(k({},xe),{emits:["success","register"],setup:he}));export{Ae as default};
