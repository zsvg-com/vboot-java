var V=(F,f,p)=>new Promise((x,e)=>{var g=u=>{try{i(p.next(u))}catch(s){e(s)}},_=u=>{try{i(p.throw(u))}catch(s){e(s)}},i=u=>u.done?x(u.value):Promise.resolve(u.value).then(g,_);i((p=p.apply(F,f)).next())});import{a as U,B as M}from"./index.f06a4b68.js";import{u as R}from"./index.5f1c2524.js";import{ah as T}from"./index.49385d3b.js";import{O as A}from"./OrgModal.179b5c8d.js";import{h as O}from"./edit.2a1803df.js";import{A as k,P as S,j as N,a0 as m,B as P,D as $,w as a,a5 as l,u as n,bt as q,ad as E,J as h,a4 as z,aa as H,t as I}from"./vendor.a4547d8e.js";/* empty css               */import"./useWindowSizeFn.01f243df.js";/* empty css               *//* empty css               *//* empty css              */import"./Tree.vue_vue&type=style&index=0&lang.156930fd.js";/* empty css               */import"./index.0aef37d2.js";/* empty css               *//* empty css               */import"./useContentViewHeight.7c57433e.js";const ie=k({emits:["success","register"],setup(F,{emit:f}){const[p,{openModal:x}]=R(),e=S({loadingText:"",url:"/sys/org/dept",data:{},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],type:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}]}}),[g,{setDrawerProps:_,changeLoading:i,closeDrawer:u}]=U(r=>V(this,null,function*(){e.loadingText="\u52A0\u8F7D\u4E2D",i(!0),r.record.id?e.data=yield T.get({url:e.url+"/one/"+r.record.id}):(e.data=r.record,e.data.parent&&e.data.parent.id===""&&(e.data.parent=null),e.data.type=2,e.data.avtag=!0),i(!1)})),s=N(()=>e.data.parent?e.data.parent.name:"");function j(){x(!0,{opener:"parent",orgType:2,selectMode:1,orgs:e.data.parent&&e.data.parent.id?[I(e.data.parent)]:[]})}function b(r){r.opener=="parent"&&(e.data.parent=r.orgs[0]),console.log(r)}return(r,c)=>{const v=m("vxe-input"),d=m("vxe-form-item"),w=m("vxe-radio-button"),B=m("vxe-radio-group"),y=m("vxe-switch"),C=m("vxe-textarea"),D=m("vxe-form");return P(),$(H,null,[a(n(M),z(r.$attrs,{loadingText:n(e).loadingText,showFooter:"",title:"\u90E8\u95E8\u4FE1\u606F",width:"70%",onOk:c[1]||(c[1]=t=>n(O)(r.$refs.xForm,n(e),f,n(_),n(i),n(u))),onRegister:n(g)}),{default:l(()=>[a(D,{"title-colon":"",ref:(t,o)=>{o.xForm=t},"title-align":"right","title-width":"100",data:n(e).data,rules:n(e).rules},{default:l(()=>[a(d,{title:"\u90E8\u95E8\u540D\u79F0",field:"name","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[a(v,{modelValue:t.name,"onUpdate:modelValue":o=>t.name=o,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(d,{title:"\u4E0A\u7EA7\u90E8\u95E8",field:"parent","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[a(v,{modelValue:n(s),"onUpdate:modelValue":c[0]||(c[0]=o=>q(s)?s.value=o:null),"suffix-icon":"vxe-icon--search",readonly:"",onClick:j},null,8,["modelValue"])]),_:1}),a(d,{title:"\u90E8\u95E8\u7C7B\u578B",field:"type","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[a(B,{modelValue:t.type,"onUpdate:modelValue":o=>t.type=o},{default:l(()=>[a(w,{label:1,content:"\u516C\u53F8"}),a(w,{label:2,content:"\u90E8\u95E8"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),a(d,{title:"\u662F\u5426\u53EF\u7528",field:"avtag","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[a(y,{modelValue:t.avtag,"onUpdate:modelValue":o=>t.avtag=o,"open-label":"\u662F","close-label":"\u5426"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(d,{title:"\u6392\u5E8F\u53F7",field:"ornum","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[a(v,{modelValue:t.ornum,"onUpdate:modelValue":o=>t.ornum=o,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(d,{title:"\u90E8\u95E8\u5907\u6CE8",field:"notes","item-render":{},span:"24","title-width":"150"},{default:l(({data:t})=>[a(C,{modelValue:t.notes,"onUpdate:modelValue":o=>t.notes=o,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",autosize:{minRows:4,maxRows:6},clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(d,{title:"\u521B\u5EFA\u65F6\u95F4",field:"crtim","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[E(h(t.crtim),1)]),_:1}),a(d,{title:"\u66F4\u65B0\u65F6\u95F4",field:"uptim","item-render":{},span:"12","title-width":"150"},{default:l(({data:t})=>[E(h(t.uptim),1)]),_:1})]),_:1},8,["data","rules"])]),_:1},16,["loadingText","onRegister"]),a(A,{onRegister:n(p),onCloseModal:b},null,8,["onRegister"])],64)}}});export{ie as default};
