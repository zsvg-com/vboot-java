var V=(_,c,d)=>new Promise((g,t)=>{var x=u=>{try{s(d.next(u))}catch(p){t(p)}},F=u=>{try{s(d.throw(u))}catch(p){t(p)}},s=u=>u.done?g(u.value):Promise.resolve(u.value).then(x,F);s((d=d.apply(_,c)).next())});import{a as C,B as R}from"./index.f06a4b68.js";import{u as U}from"./index.5f1c2524.js";import{ah as y}from"./index.49385d3b.js";import{O as M}from"./OrgModal.179b5c8d.js";import{h as T}from"./edit.2a1803df.js";import{A,P as O,j as k,a0 as f,B as S,D as z,w as o,a5 as n,u as r,bt as N,ad as h,J as j,a4 as P,aa as $,t as q}from"./vendor.a4547d8e.js";/* empty css               */import"./useWindowSizeFn.01f243df.js";/* empty css               *//* empty css               *//* empty css              */import"./Tree.vue_vue&type=style&index=0&lang.156930fd.js";/* empty css               */import"./index.0aef37d2.js";/* empty css               *//* empty css               */import"./useContentViewHeight.7c57433e.js";const ne=A({emits:["success","register"],setup(_,{emit:c}){const[d,{openModal:g}]=U(),t=O({loadingText:"",url:"/sys/org/group",data:{},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],members:[{required:!0,message:"\u8BF7\u9009\u62E9\u6210\u5458x"}]}}),[x,{setDrawerProps:F,changeLoading:s,closeDrawer:u}]=C(a=>V(this,null,function*(){t.loadingText="\u52A0\u8F7D\u4E2D",s(!0),a.record.id?t.data=yield y.get({url:t.url+"/one/"+a.record.id}):(t.data=a.record,t.data.avtag=!0),s(!1)}));function p(){g(!0,{opener:"members",orgType:10,selectMode:2,orgs:t.data.members?[...q(t.data.members)]:[]})}const w=k(()=>{let a="";if(t.data.members&&t.data.members.length>0)for(const m of t.data.members)a+=m.name+"\uFF1B";return a});function B(a){a.opener=="members"&&(t.data.members=a.orgs),console.log(a)}return(a,m)=>{const b=f("vxe-input"),i=f("vxe-form-item"),v=f("vxe-textarea"),D=f("vxe-switch"),E=f("vxe-form");return S(),z($,null,[o(r(R),P(a.$attrs,{loadingText:r(t).loadingText,showFooter:"",title:"\u7FA4\u7EC4\u540D\u79F0",width:"70%",onOk:m[1]||(m[1]=e=>r(T)(a.$refs.xForm,r(t),c,r(F),r(s),r(u))),onRegister:r(x)}),{default:n(()=>[o(E,{"title-colon":"",ref:(e,l)=>{l.xForm=e},"title-align":"right","title-width":"100",data:r(t).data,rules:r(t).rules},{default:n(()=>[o(i,{title:"\u7FA4\u7EC4\u540D\u79F0",field:"name","item-render":{},span:"12","title-width":"150"},{default:n(({data:e})=>[o(b,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(i,{title:"\u6210\u5458\u5217\u8868",field:"members","item-render":{},span:"24","title-width":"150"},{default:n(({data:e})=>[o(v,{modelValue:r(w),"onUpdate:modelValue":m[0]||(m[0]=l=>N(w)?w.value=l:null),placeholder:"\u8BF7\u9009\u62E9\u6210\u5458",autosize:{minRows:4,maxRows:6},onClick:p,readonly:""},null,8,["modelValue"])]),_:1}),o(i,{title:"\u662F\u5426\u53EF\u7528",field:"avtag","item-render":{},span:"12","title-width":"150"},{default:n(({data:e})=>[o(D,{modelValue:e.avtag,"onUpdate:modelValue":l=>e.avtag=l,"open-label":"\u662F","close-label":"\u5426"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(i,{title:"\u6392\u5E8F\u53F7",field:"ornum","item-render":{},span:"12","title-width":"150"},{default:n(({data:e})=>[o(b,{modelValue:e.ornum,"onUpdate:modelValue":l=>e.ornum=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(i,{title:"\u7FA4\u7EC4\u5907\u6CE8",field:"notes","item-render":{},span:"24","title-width":"150"},{default:n(({data:e})=>[o(v,{modelValue:e.notes,"onUpdate:modelValue":l=>e.notes=l,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",autosize:{minRows:4,maxRows:6},clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(i,{title:"\u521B\u5EFA\u65F6\u95F4",field:"crtim","item-render":{},span:"12","title-width":"150"},{default:n(({data:e})=>[h(j(e.crtim),1)]),_:1}),o(i,{title:"\u66F4\u65B0\u65F6\u95F4",field:"uptim","item-render":{},span:"12","title-width":"150"},{default:n(({data:e})=>[h(j(e.uptim),1)]),_:1})]),_:1},8,["data","rules"])]),_:1},16,["loadingText","onRegister"]),o(M,{onRegister:r(d),onCloseModal:B},null,8,["onRegister"])],64)}}});export{ne as default};
