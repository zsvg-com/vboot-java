var _=(k,M,i)=>new Promise((h,b)=>{var E=d=>{try{x(i.next(d))}catch(I){b(I)}},B=d=>{try{x(i.throw(d))}catch(I){b(I)}},x=d=>d.done?h(d.value):Promise.resolve(d.value).then(E,B);x((i=i.apply(k,M)).next())});import{A as K,r as C,a0 as H,B as v,a1 as Q,a5 as u,w as n,u as c,bp as X,bE as D,H as s,bF as Y,D as m,ao as j,b0 as P,J as w,aa as S,bG as Z,b9 as ee,b8 as U,bH as te,bI as ae,bJ as se,a4 as le,ad as g,L as oe,N as ne,t as $}from"./vendor.a4547d8e.js";/* empty css               *//* empty css               *//* empty css              */import{a as ce,B as ue}from"./index.5f1c2524.js";import{_ as re}from"./Tree.vue_vue&type=style&index=0&lang.156930fd.js";import{P as ie}from"./index.0aef37d2.js";import{_ as de,ah as F}from"./index.49385d3b.js";const q=k=>(oe("data-v-7f5340d2"),k=k(),ne(),k),fe=g("\u6700\u8FD1\u4F7F\u7528"),pe=g("\u67E5\u8BE2"),he={style:{"margin-top":"5px",overflow:"auto",height:"353px",border:"1px solid #ccc"}},_e={class:"z-org-search",id:"zOrgSearch",style:{padding:"2px"}},ve=["onClick"],ge=q(()=>s("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),ke={class:"layui-elip f-user-name"},be={class:"layui-elip f-user-dept"},ye=g("\u5C42\u7EA7\u67B6\u6784"),me={style:{height:"390px",border:"1px solid #ccc"}},xe={style:{border:"1px solid #ccc",height:"390px","margin-left":"5px",overflow:"auto"}},Ie={class:"z-org-tree"},Ce=["onClick"],we=q(()=>s("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),Fe={class:"layui-elip f-user-name"},Ee={class:"layui-elip f-user-dept"},Be=g("\u5E38\u7528\u7FA4\u7EC4"),De=g(" \u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1 "),qe=g("\u6211\u7684\u6536\u85CF"),Me=g(" \u8FD9\u4E2A\u4E5F\u6682\u4E0D\u652F\u6301\uFF0C\u5F85\u5F00\u53D1 "),Oe={class:"w-1/3 xl:w-1/3",style:{"margin-left":"5px"}},je=q(()=>s("div",{style:{height:"30px"}},[s("div",{style:{"margin-top":"16px"}},"\u5DF2 \u9009")],-1)),Se={style:{border:"1px solid #ccc",height:"390px",overflow:"auto"}},Te={class:"z-org-selected",style:{position:"relative"}},Ae=q(()=>s("img",{class:"vben-header-user-dropdown__header",src:"https://q1.qlogo.cn/g?b=qq&nk=190848757&s=640"},null,-1)),He={class:"layui-elip f-user-name2"},Pe=K({emits:["closeModal","register"],setup(k,{emit:M}){let i=-1,h="1",b=1,E=null,B=!1;const[x,{setModalProps:d,closeModal:I}]=ce(t=>_(this,null,function*(){if(i!=t.orgType&&(i=t.orgType,yield N(),f.value.splice(0,f.value.length)),b=t.selectMode,E=t.opener,a.value=t.orgs?t.orgs:[],h==="1")for(const e of p.value)for(const l of a.value){let r=!1;if(l.id==e.id){e.checked=!0,r=!0;break}r||(e.checked=!1)}else if(h==="2")for(const e of f.value)for(const l of a.value){let r=!1;if(l.id==e.id){e.checked=!0,r=!0;break}r||(e.checked=!1)}}));function z(){try{d({confirmLoading:!0}),I(),a.value&&a.value.length>0&&F.post({url:"/gen/org/rece",data:$(a.value)});const t={opener:E,orgs:$(a.value)};M("closeModal",t)}finally{d({confirmLoading:!1})}}function L(t){return _(this,null,function*(){if(h=t,t==="1")for(const e of p.value){let l=!1;for(const r of a.value)if(r.id==e.id){e.checked=!0,l=!0;break}l||(e.checked=!1)}else if(t==="2"){B||(yield V(),B=!0);for(const e of f.value){let l=!1;for(const r of a.value)if(r.id==e.id){e.checked=!0,l=!0;break}l||(e.checked=!1)}}})}const p=C([]),O=C("");function T(){return _(this,null,function*(){p.value=yield F.get({url:"/gen/org/main/list?type="+i,params:{name:O.value}});for(const t of p.value){let e=!1;for(const l of a.value)if(l.id==t.id){t.checked=!0,e=!0;break}e||(t.checked=!1)}})}function N(){return _(this,null,function*(){p.value=yield F.get({url:"/gen/org/rece/list?type="+i})})}function R(t){if(t.checked=!t.checked,b==1)a.value.length>0&&a.value.splice(0,1),a.value.push(t);else if(t.checked){let e=!1;for(const l of a.value)if(l.id===t.id){e=!0;break}e||a.value.push(t)}else for(let e=0;e<a.value.length;e++)if(a.value[e].id===t.id){a.value.splice(e,1);break}}const A=C([]);function V(){return _(this,null,function*(){A.value=yield F.get({url:"/gen/org/dept/tree"})})}const f=C([]);function J(t){return _(this,null,function*(){if(t.length>0){f.value=yield F.get({url:"/gen/org/main/list?type="+i,params:{deptid:t[0]}});for(const e of f.value)for(const l of a.value)if(l.id===e.id){e.checked=!0;break}}})}function G(t){if(t.checked=!t.checked,b==1)a.value.length>0&&a.value.splice(0,1),a.value.push(t);else if(t.checked){let e=!1;for(const l of a.value)if(l.id===t.id){e=!0;break}e||a.value.push(t)}else for(let e=0;e<a.value.length;e++)if(a.value[e].id===t.id){a.value.splice(e,1);break}}const a=C([]);function W(t){if(h==="1"){for(let e=0;e<p.value.length;e++)if(p.value[e].id===t.id){p.value[e].checked=!1;break}}else if(h==="2"){for(let e=0;e<f.value.length;e++)if(f.value[e].id===t.id){f.value[e].checked=!1;break}}for(let e=0;e<a.value.length;e++)if(a.value[e].id===t.id){a.value.splice(e,1);break}}return(t,e)=>{const l=H("a-input-search"),r=H("a-button");return v(),Q(c(ue),le(t.$attrs,{onRegister:c(x),title:"\u7EC4\u7EC7\u67B6\u6784\u9009\u62E9",width:"1000px",height:440,onOk:z}),{default:u(()=>[n(c(ie),{dense:"",contentClass:"flex"},{default:u(()=>[n(c(X),{type:"card",class:"w-2/3 xl:w-2/3",onChange:L},{default:u(()=>[n(c(D),{key:"1"},{tab:u(()=>[s("span",null,[n(c(Y)),fe])]),default:u(()=>[s("div",null,[n(l,{onSearch:T,value:O.value,"onUpdate:value":e[0]||(e[0]=o=>O.value=o),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u67E5\u8BE2",style:{width:"200px"}},null,8,["value"]),n(r,{type:"primary",style:{"margin-left":"10px"},onClick:T},{default:u(()=>[pe]),_:1})]),s("div",he,[s("ul",_e,[(v(!0),m(S,null,j(p.value,o=>(v(),m("li",{key:o.id,class:"f-user",onClick:y=>R(o)},[n(c(P),{checked:o.checked,"onUpdate:checked":y=>o.checked=y},null,8,["checked","onUpdate:checked"]),ge,s("span",ke,w(o.name),1),s("span",be,w(o.dept),1)],8,ve))),128))])])]),_:1}),n(c(D),{key:"2"},{tab:u(()=>[s("span",null,[n(c(Z)),ye])]),default:u(()=>[n(c(ee),null,{default:u(()=>[n(c(U),{span:12},{default:u(()=>[s("div",me,[n(c(re),{title:"\u90E8\u95E8\u5217\u8868",toolbar:"",search:"",treeData:A.value,replaceFields:{key:"id",title:"name"},onSelect:J},null,8,["treeData"])])]),_:1}),n(c(U),{span:12},{default:u(()=>[s("div",xe,[s("ul",Ie,[(v(!0),m(S,null,j(f.value,o=>(v(),m("li",{key:o.id,class:"f-user",title:"444444444",onClick:y=>G(o)},[n(c(P),{checked:o.checked,"onUpdate:checked":y=>o.checked=y},null,8,["checked","onUpdate:checked"]),we,s("span",Fe,w(o.name),1),s("span",Ee,w(o.dept),1)],8,Ce))),128))])])]),_:1})]),_:1})]),_:1}),n(c(D),{key:"3"},{tab:u(()=>[s("span",null,[n(c(te)),Be])]),default:u(()=>[De]),_:1}),n(c(D),{key:"4"},{tab:u(()=>[s("span",null,[n(c(ae)),qe])]),default:u(()=>[Me]),_:1})]),_:1}),s("div",Oe,[je,s("div",Se,[s("ul",Te,[(v(!0),m(S,null,j(a.value,o=>(v(),m("li",{key:o.id,class:"f-user",style:{overflow:"hidden"}},[n(c(se),{onClick:y=>W(o)},null,8,["onClick"]),Ae,s("span",He,w(o.name),1)]))),128))])])])]),_:1})]),_:1},16,["onRegister"])}}});var We=de(Pe,[["__scopeId","data-v-7f5340d2"]]);export{We as O};
