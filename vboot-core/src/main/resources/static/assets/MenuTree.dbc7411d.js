var y=(g,b,c)=>new Promise((a,e)=>{var h=o=>{try{d(c.next(o))}catch(u){e(u)}},v=o=>{try{d(c.throw(o))}catch(u){e(u)}},d=o=>o.done?a(o.value):Promise.resolve(o.value).then(h,v);d((c=c.apply(g,b)).next())});import{ah as T}from"./index.49385d3b.js";import{A as N,r as V,P as B,bB as m,_ as A,a0 as p,B as E,D as $,H as k,w as l,u as f,a5 as x,ad as w,$ as K}from"./vendor.a4547d8e.js";const R={class:"bg-white overflow-hidden ztree"},S={style:{"margin-bottom":"4px"}},z=w("\u5C55\u5F00"),j=w("\u6298\u53E0"),F=w("\u6D4B\u8BD5"),H={style:{border:"1px solid #ddd"}},U=N({props:{menuArr:{type:Array}},emits:["select"],setup(g,{expose:b,emit:c}){const a=V({}),e=B({filterName:"",tableData:[],originData:[],tableTreeConfig:{children:"children",rowKey:"id",indent:15,parentKey:"pid",iconOpen:"vxe-icon--arrow-bottom",iconClose:"vxe-icon--arrow-right"}}),h=()=>{const n=m.toValueString(e.filterName).trim();if(n){const t={children:"children"},i=["name"];e.tableData=m.searchTree(e.originData,r=>i.some(_=>m.toValueString(r[_]).indexOf(n)>-1),t),K(()=>{a.value.setAllTreeExpand(!0)})}else e.tableData=e.originData},v=m.debounce(function(){h()},500,{leading:!1,trailing:!0});function d(){return y(this,null,function*(){e.originData=yield T.get({url:"/sys/auth/menu/tree"}),h()})}A(()=>{d()});function o(){const n=a.value,t=n.getCheckboxRecords();n.getCheckboxIndeterminateRecords(),console.log(t);const i=[];for(const r of t)i.push({id:r.id,name:r.name});return i}function u(){a.value.reloadData(e.originData)}return b({getMenus:o,reloadTree:u}),(n,t)=>{const i=p("vxe-input"),r=p("vxe-button"),_=p("vxe-column"),D=p("vxe-table");return E(),$("div",R,[k("div",S,[l(i,{modelValue:f(e).filterName,"onUpdate:modelValue":t[0]||(t[0]=s=>f(e).filterName=s),placeholder:"\u641C\u7D22",type:"type",onKeyup:f(v)},null,8,["modelValue","onKeyup"]),l(r,{onClick:t[1]||(t[1]=s=>n.$refs.xTree.setAllTreeExpand(!0))},{default:x(()=>[z]),_:1}),l(r,{onClick:t[2]||(t[2]=s=>n.$refs.xTree.clearTreeExpand())},{default:x(()=>[j]),_:1}),l(r,{onClick:o},{default:x(()=>[F]),_:1})]),k("div",H,[l(D,{ref:(s,C)=>{C.xTree=s,a.value=s},resizable:"","show-overflow":"","row-key":"","row-id":"id",border:"none",size:"mini",height:"600px","highlight-current-row":"","highlight-hover-row":"","show-header":!1,"checkbox-config":{labelField:"name",checkRowKeys:g.menuArr,checkStrictly:!0},"row-config":{height:120},"tree-config":f(e).tableTreeConfig,data:f(e).tableData},{default:x(()=>[l(_,{type:"checkbox","tree-node":""})]),_:1},8,["checkbox-config","tree-config","data"])])])}}});export{U as default};
